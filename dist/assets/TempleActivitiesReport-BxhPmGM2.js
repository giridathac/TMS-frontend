import{U as ye,q as be,W as xe,e as he,r as b,c as U,C as we,s as _e,D as V,h as i,j as x,i as s,z as ke,E as Se,H as Te,G as c,t as o,y as Q,n as z,w as O,k as ee,F as $,l as N,v as te,X as q,A as De,o as d}from"./index-Bqden_Qr.js";const Ae={class:"min-h-screen bg-gray-50"},Ce={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4"},Re={class:"bg-white shadow-sm border-b border-gray-200 rounded-2xl"},Le={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Ee={class:"flex items-center justify-between"},Fe={class:"text-gray-600 mt-1"},Ue={key:0,class:"text-indigo-600 font-medium"},Me={key:1,class:"text-indigo-600 font-medium"},Be={class:"flex items-center space-x-4"},Oe={class:"bg-indigo-50 px-4 py-2 rounded-lg border border-indigo-200"},$e={class:"text-indigo-800 font-medium"},Ne={class:"text-indigo-600 text-sm ml-2"},qe={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ie={key:2,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4"},je={class:"bg-red-50 border border-red-200 rounded-md p-4"},Ve={class:"flex"},ze={class:"ml-3"},Pe={class:"mt-1 text-sm text-red-700"},He={key:3,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4"},Je={class:"bg-yellow-50 border border-yellow-200 rounded-md p-4 text-sm"},Xe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Ye={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8"},We={class:"p-6"},Ge={class:"mb-6"},Ke={class:"flex items-center justify-between mb-2"},Ze=["disabled"],Qe={class:"relative"},et=["disabled"],tt=["value"],st={key:0,class:"text-gray-500"},nt={key:0,class:"mt-2 text-sm text-amber-600 bg-amber-50 border border-amber-200 rounded-md p-2"},at={key:1,class:"mt-2 text-sm text-green-600"},lt={key:0},ot={class:"mb-6"},rt={class:"flex flex-wrap gap-2"},it=["onClick"],dt={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},ut={class:"flex flex-wrap gap-2"},ct=["onClick"],mt={key:0,class:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg"},vt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},gt={class:"border-t border-gray-200 pt-6"},pt={class:"flex flex-col md:flex-row md:items-center md:justify-between"},ft={class:"flex items-center space-x-3"},yt={class:"relative"},bt=["value"],xt=["disabled"],ht={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},wt={key:1,class:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},_t={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},kt={class:"p-6"},St={class:"flex flex-wrap gap-2"},Tt={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},Dt={class:"font-medium mr-1"},At={key:0},Ct={key:1},Rt={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},Lt={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},Et={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},Ft={key:0},Ut={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},Ot={__name:"TempleActivitiesReport",setup(Mt){const v=we();De();const M=ye(),T=be(),I=xe(),{showToast:P}=he(),w=b("all"),D=b("events"),A=b("monthly"),R=b("pdf"),se=b(!1),ne=()=>{const t=new Date;return{start:new Date(t.getTime()-720*60*60*1e3).toISOString().split("T")[0],end:t.toISOString().split("T")[0]}},{start:ae,end:le}=ne(),p=b(ae),f=b(le),_=b(!1),g=b(null),L=b([]),C=b(!1),H=[{label:"Events Report",value:"events"},{label:"Seva Reports",value:"sevas"},{label:"Seva Bookings",value:"bookings"},{label:"Donations Reports",value:"donations"}],J=[{label:"Weekly",value:"weekly"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"},{label:"Custom Range",value:"custom"}],X=[{label:"PDF",value:"pdf"},{label:"CSV",value:"csv"},{label:"Excel",value:"excel"}],oe=U(()=>{var n;const t=(T==null?void 0:T.user)||{},e=(t.role||t.userType||"").toString().toLowerCase(),a=Array.isArray(t.roles)?t.roles.map(h=>(h||"").toString().toLowerCase()):[],l=!!(t.isSuperAdmin||t.is_super_admin);return e==="superadmin"||a.includes("superadmin")||l||((n=v==null?void 0:v.query)==null?void 0:n.from)==="superadmin"}),m=U(()=>!!oe.value),u=U(()=>{var t,e;if(m.value&&v.query.tenants){const a=String(v.query.tenants).split(",").filter(Boolean);if(a.length>1)return null;if(a.length===1)return a[0].trim()}return v.params.tenantId||v.query.tenantId||v.query.tenant_id||((t=T.user)==null?void 0:t.tenantId)||((e=T.user)==null?void 0:e.tenant_id)||(typeof localStorage<"u"?localStorage.getItem("current_tenant_id"):null)||null}),r=U(()=>{if(m.value&&v.query.tenants)return String(v.query.tenants).split(",").map(e=>e.trim()).filter(Boolean);const t=u.value;return t?[t]:[]}),S=U(()=>m.value&&r.value.length>1?L.value||[]:M.temples||[]),re=t=>{if(t==="all")return"All Temples";const e=S.value.find(a=>{var l;return((l=a.id)==null?void 0:l.toString())===(t==null?void 0:t.toString())});return e?e.name:"Unknown Temple"},j=t=>{const e=H.find(a=>a.value===t);return e?e.label:"Unknown"},ie=t=>{const e=J.find(a=>a.value===t);return e?e.label:"Unknown"},Y=t=>{const e=X.find(a=>a.value===t);return e?e.label:"Unknown"},W=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",G=()=>{g.value=null},de=t=>{D.value=t},ue=t=>{A.value=t;const e=new Date;if(t==="weekly"){const a=new Date(e.getTime()-6048e5);p.value=a.toISOString().split("T")[0],f.value=e.toISOString().split("T")[0]}else if(t==="monthly"){const a=new Date(e.getTime()-2592e6);p.value=a.toISOString().split("T")[0],f.value=e.toISOString().split("T")[0]}else if(t==="yearly"){const a=new Date(e.getFullYear()-1,e.getMonth(),e.getDate());p.value=a.toISOString().split("T")[0],f.value=e.toISOString().split("T")[0]}},ce=()=>{},K=()=>{p.value&&f.value&&new Date(p.value)>new Date(f.value)?g.value="Start date cannot be after end date":G()},B=t=>t?{"X-Tenant-ID":String(t),"X-Entity-ID":String(t),"Tenant-ID":String(t)}:{},me=()=>{const t={type:D.value,dateRange:A.value,startDate:p.value,endDate:f.value,format:R.value,isSuperAdmin:m.value};if(w.value==="all")m.value&&r.value.length>1?(t.tenantIds=r.value.slice(),t.entityIds=r.value.slice()):u.value&&(t.tenantId=u.value,t.entityId=u.value);else if(t.templeId=w.value,t.temple_id=w.value,m.value&&r.value.length>1){const e=L.value.find(l=>String(l.id)===String(w.value)),a=(e==null?void 0:e.tenant_id)||(e==null?void 0:e.created_by)||(e==null?void 0:e.entityId);a?(t.tenantId=a,t.entityId=a):(t.tenantId=r.value[0],t.entityId=r.value[0])}else u.value&&(t.tenantId=u.value,t.entityId=u.value);return t},ve=async()=>{var t,e;if(!C.value){if(!p.value||!f.value){g.value="Please select both start and end dates";return}if(new Date(p.value)>new Date(f.value)){g.value="Start date cannot be after end date";return}if(r.value.length===0){g.value="No tenant selected for report generation";return}C.value=!0,g.value=null;try{const a=me();console.log("Download params:",a);let l;if(I&&typeof I.downloadActivitiesReport=="function")l=await I.downloadActivitiesReport(a);else{const n={};u.value&&r.value.length===1&&Object.assign(n,B(u.value));const h=await q.post("/v1/reports/activities/download",a,{responseType:"blob",headers:n}),y=new Blob([h.data],{type:h.headers["content-type"]||"application/octet-stream"}),k=window.URL.createObjectURL(y),F=document.createElement("a");F.href=k;const pe=new Date().toISOString().split("T")[0],fe=j(D.value).toLowerCase().replace(/\s+/g,"-");F.download=`${fe}-report-${pe}.${a.format}`,document.body.appendChild(F),F.click(),document.body.removeChild(F),window.URL.revokeObjectURL(k),l={success:!0}}if(l&&l.success)P(`${j(D.value)} downloaded successfully as ${Y(R.value)}`,"success");else throw new Error((l==null?void 0:l.message)||"Failed to download report")}catch(a){console.error("Error downloading report:",a);const l=((e=(t=a.response)==null?void 0:t.data)==null?void 0:e.message)||a.message||"Unknown error occurred";g.value=`Failed to download report: ${l}`,P("Failed to download report. Please try again.","error")}finally{C.value=!1}}},E=async()=>{var t,e;_.value=!0,g.value=null;try{if(M.temples=[],L.value=[],r.value.length===0){console.warn("No tenant IDs available for fetching temples"),g.value="No tenant selected to load temples.";return}if(m.value&&r.value.length>1){console.log("Fetching temples for multiple tenants:",r.value);const a=r.value.map(y=>Z(y).catch(k=>(console.warn(`Failed to fetch temples for tenant ${y}:`,k),[]))),l=await Promise.allSettled(a),n=[];for(let y=0;y<l.length;y++){const k=l[y];k.status==="fulfilled"&&Array.isArray(k.value)&&n.push(...k.value)}const h=new Set;L.value=n.filter(y=>h.has(y.id)?!1:(h.add(y.id),!0)),console.log(`Loaded ${L.value.length} temples from ${r.value.length} tenants`)}else if(u.value){console.log("Fetching temples for single tenant:",u.value);const a=await Z(u.value);M.temples=a,console.log(`Loaded ${M.temples.length} temples for tenant ${u.value}`)}else console.warn("No tenant ID available to fetch temples"),g.value="No tenant selected to load temples."}catch(a){console.error("Error in fetchTemples:",a);const l=((e=(t=a.response)==null?void 0:t.data)==null?void 0:e.message)||a.message||"Unknown error occurred";g.value=`Failed to load temple data: ${l}`}finally{_.value=!1}},Z=async t=>{console.log(`Fetching temples for tenant: ${t}`);try{try{const e=await q.get("/v1/temples",{params:{tenant_id:t,entityId:t,entity_id:t},headers:B(t)});let a=[];if(Array.isArray(e.data)?a=e.data:e.data&&Array.isArray(e.data.data)?a=e.data.data:e.data&&Array.isArray(e.data.temples)&&(a=e.data.temples),a.length>0)return a.map(l=>({id:l.id,name:l.name||l.temple_name||l.entity_name||"Unknown Temple",status:l.status||"active",tenant_id:l.tenant_id||l.entityId||l.created_by||t,created_by:l.created_by||t,entityId:l.entityId||l.tenant_id||t}))}catch(e){console.log("Temples endpoint failed, trying entities endpoint:",e.message)}try{const e=await q.get("/v1/entities",{params:{tenant_id:t,entityId:t,entity_id:t,created_by:t},headers:B(t)});let a=[];return Array.isArray(e.data)?a=e.data:e.data&&Array.isArray(e.data.data)?a=e.data.data:e.data&&Array.isArray(e.data.entities)&&(a=e.data.entities),a.filter(n=>String(n.created_by)===String(t)||String(n.tenant_id)===String(t)||String(n.entityId)===String(t)).map(n=>({id:n.id,name:n.name||n.temple_name||n.entity_name||"Unknown Temple",status:n.status||"active",tenant_id:n.tenant_id||n.entityId||n.created_by||t,created_by:n.created_by||t,entityId:n.entityId||n.tenant_id||t}))}catch(e){console.log("Entities endpoint also failed:",e.message)}try{const e=await q.get("/v1/entities",{headers:B(t)});let a=[];return Array.isArray(e.data)?a=e.data:e.data&&Array.isArray(e.data.data)&&(a=e.data.data),a.filter(n=>String(n.created_by)===String(t)||String(n.tenant_id)===String(t)||String(n.entityId)===String(t)).map(n=>({id:n.id,name:n.name||n.temple_name||n.entity_name||"Unknown Temple",status:n.status||"active",tenant_id:n.tenant_id||n.entityId||n.created_by||t,created_by:n.created_by||t,entityId:n.entityId||n.tenant_id||t}))}catch(e){return console.error("All strategies failed for tenant:",t,e),[]}}catch(e){return console.error(`Error fetching temples for tenant ${t}:`,e),[]}},ge=async()=>{await E()};return _e(async()=>{console.log("Component mounted with tenant context:",{fromSuperadmin:m.value,effectiveTenantId:u.value,tenantIds:r.value,routeQuery:v.query,routeParams:v.params}),await E()}),V(r,async(t,e)=>{t&&t.length>0&&JSON.stringify(t)!==JSON.stringify(e)&&(console.log("Tenant IDs changed, refetching temples:",{old:e,new:t}),await E())},{deep:!0}),V(u,async(t,e)=>{t!==e&&(console.log("Effective tenant ID changed, refetching temples:",{old:e,new:t}),await E())}),V(()=>v.query,async(t,e)=>{(t.tenants!==e.tenants||t.tenantId!==e.tenantId)&&(console.log("Route query changed, updating tenant context:",{old:e,new:t}),await E())},{deep:!0}),(t,e)=>{var l;const a=Te("router-link");return d(),i("div",Ae,[m.value?(d(),i("div",Ce,[ke(a,{to:"/superadmin/reports",class:"inline-flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"},{default:Se(()=>[...e[4]||(e[4]=[s("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),c(" Back to SuperAdmin Reports ",-1)])]),_:1})])):x("",!0),s("div",Re,[s("div",Le,[s("div",Ee,[s("div",null,[e[6]||(e[6]=s("h1",{class:"text-2xl font-bold text-gray-900"},"Temple Activities Report",-1)),s("p",Fe,[e[5]||(e[5]=c(" Download event, seva, and booking activity data for your temples ",-1)),m.value&&r.value.length>1?(d(),i("span",Ue," (Multiple Tenants: "+o(r.value.length)+" selected) ",1)):u.value?(d(),i("span",Me," (Tenant ID: "+o(u.value)+") ",1)):x("",!0)])]),s("div",Be,[s("div",Oe,[s("span",$e,o(((l=Q(T).user)==null?void 0:l.name)||"Tenant User"),1),s("span",Ne,o(m.value?"(Super Admin)":"(Tenant)"),1)])])])])]),_.value?(d(),i("div",qe,[...e[7]||(e[7]=[s("div",{class:"bg-white rounded-lg p-6 flex items-center space-x-3"},[s("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"}),s("span",{class:"text-gray-900 font-medium"},"Loading data...")],-1)])])):x("",!0),g.value?(d(),i("div",Ie,[s("div",je,[s("div",Ve,[e[10]||(e[10]=s("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),s("div",ze,[e[8]||(e[8]=s("h3",{class:"text-sm font-medium text-red-800"},"Error",-1)),s("p",Pe,o(g.value),1)]),s("div",{class:"ml-auto pl-3"},[s("button",{onClick:G,class:"text-red-400 hover:text-red-500"},[...e[9]||(e[9]=[s("span",{class:"sr-only"},"Dismiss",-1),s("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])])])])])):x("",!0),se.value?(d(),i("div",He,[s("div",Je,[e[16]||(e[16]=s("h4",{class:"font-medium text-yellow-800"},"Debug Info:",-1)),s("p",null,[e[11]||(e[11]=s("strong",null,"From Superadmin:",-1)),c(" "+o(m.value),1)]),s("p",null,[e[12]||(e[12]=s("strong",null,"Effective Tenant ID:",-1)),c(" "+o(u.value),1)]),s("p",null,[e[13]||(e[13]=s("strong",null,"Tenant IDs:",-1)),c(" "+o(JSON.stringify(r.value)),1)]),s("p",null,[e[14]||(e[14]=s("strong",null,"Available Temples:",-1)),c(" "+o(S.value.length),1)]),s("p",null,[e[15]||(e[15]=s("strong",null,"Route Query:",-1)),c(" "+o(JSON.stringify(Q(v).query)),1)])])])):x("",!0),s("div",Xe,[s("div",Ye,[e[28]||(e[28]=s("div",{class:"p-6 border-b border-gray-200"},[s("h3",{class:"text-xl font-bold text-gray-900"},"Temple Activities"),s("p",{class:"text-gray-600 mt-1"},"Configure filters and download your temple activity data")],-1)),s("div",We,[s("div",Ge,[s("div",Ke,[e[18]||(e[18]=s("label",{class:"block text-gray-700 font-medium"},"Select Temple",-1)),s("button",{onClick:ge,disabled:_.value,class:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-indigo-600 bg-indigo-50 border border-indigo-200 rounded-md hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[(d(),i("svg",{class:z(["mr-1 h-3 w-3",{"animate-spin":_.value}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...e[17]||(e[17]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),c(" "+o(_.value?"Refreshing...":"Refresh"),1)],8,Ze)]),s("div",Qe,[O(s("select",{"onUpdate:modelValue":e[0]||(e[0]=n=>w.value=n),class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",onChange:ce,disabled:_.value},[e[19]||(e[19]=s("option",{value:"all"},"All Temples",-1)),(d(!0),i($,null,N(S.value,n=>(d(),i("option",{key:n.id,value:n.id},[c(o(n.name)+" ",1),n.tenant_id?(d(),i("span",st,"(Tenant: "+o(n.tenant_id)+")",1)):x("",!0)],8,tt))),128))],40,et),[[ee,w.value]])]),S.value.length===0&&!_.value?(d(),i("div",nt,[...e[20]||(e[20]=[s("div",{class:"flex items-center"},[s("svg",{class:"h-4 w-4 text-amber-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})]),c(" No temples found for selected tenant(s). Please check tenant access or try refreshing. ")],-1)])])):S.value.length>0?(d(),i("div",at,[c(o(S.value.length)+" temple"+o(S.value.length!==1?"s":"")+" available ",1),m.value&&r.value.length>1?(d(),i("span",lt," across "+o(r.value.length)+" tenant"+o(r.value.length!==1?"s":""),1)):x("",!0)])):x("",!0)]),s("div",ot,[e[21]||(e[21]=s("label",{class:"block text-gray-700 font-medium mb-2"},"Activity Type",-1)),s("div",rt,[(d(),i($,null,N(H,n=>s("button",{key:n.value,onClick:h=>de(n.value),class:z(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",D.value===n.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},o(n.label),11,it)),64))])]),s("div",dt,[s("div",null,[e[22]||(e[22]=s("label",{class:"block text-gray-700 font-medium mb-2"},"Date Range",-1)),s("div",ut,[(d(),i($,null,N(J,n=>s("button",{key:n.value,onClick:h=>ue(n.value),class:z(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",A.value===n.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},o(n.label),11,ct)),64))])])]),A.value==="custom"?(d(),i("div",mt,[s("div",vt,[s("div",null,[e[23]||(e[23]=s("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"Start Date",-1)),O(s("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=n=>p.value=n),class:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",onChange:K},null,544),[[te,p.value]])]),s("div",null,[e[24]||(e[24]=s("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"End Date",-1)),O(s("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=n=>f.value=n),class:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",onChange:K},null,544),[[te,f.value]])])])])):x("",!0),s("div",gt,[s("div",pt,[e[27]||(e[27]=s("div",{class:"mb-4 md:mb-0"},[s("h4",{class:"text-lg font-medium text-gray-900"},"Download Report"),s("p",{class:"text-sm text-gray-600"},"Select a format and click download")],-1)),s("div",ft,[s("div",yt,[O(s("select",{"onUpdate:modelValue":e[3]||(e[3]=n=>R.value=n),class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},[(d(),i($,null,N(X,n=>s("option",{key:n.value,value:n.value},o(n.label),9,bt)),64))],512),[[ee,R.value]])]),s("button",{onClick:ve,disabled:C.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[C.value?(d(),i("svg",ht,[...e[25]||(e[25]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(d(),i("svg",wt,[...e[26]||(e[26]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])])),c(" "+o(C.value?"Downloading...":"Download"),1)],8,xt)])])])])]),s("div",_t,[s("div",kt,[e[33]||(e[33]=s("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Applied Filters",-1)),s("div",St,[s("div",Tt,[s("span",Dt,o(m.value&&r.value.length>1?"Tenants:":"Tenant:"),1),m.value&&r.value.length>1?(d(),i("span",At,o(r.value.length)+" selected ",1)):(d(),i("span",Ct,o(u.value),1))]),s("div",Rt,[e[29]||(e[29]=s("span",{class:"font-medium mr-1"},"Temple:",-1)),c(" "+o(w.value==="all"?"All Temples":re(w.value)),1)]),s("div",Lt,[e[30]||(e[30]=s("span",{class:"font-medium mr-1"},"Activity:",-1)),c(" "+o(j(D.value)),1)]),s("div",Et,[e[31]||(e[31]=s("span",{class:"font-medium mr-1"},"Period:",-1)),c(" "+o(ie(A.value))+" ",1),A.value==="custom"?(d(),i("span",Ft," ("+o(W(p.value))+" - "+o(W(f.value))+") ",1)):x("",!0)]),s("div",Ut,[e[32]||(e[32]=s("span",{class:"font-medium mr-1"},"Format:",-1)),c(" "+o(Y(R.value)),1)])]),e[34]||(e[34]=s("p",{class:"mt-4 text-sm text-gray-600"}," Your report will include data based on the filters above. Click Download to generate and download the report. ",-1))])])])])}}};export{Ot as default};
