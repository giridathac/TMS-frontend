import{r as g,c as xe,s as we,h as d,i as t,j as w,G as k,z as be,E as ke,H as _e,t as p,w as X,k as Ce,F as Y,l as Z,v as Ae,e as Te,o as u,n as De}from"./index-Bqden_Qr.js";import{s as T}from"./superadmin.service-ymcF6AST.js";const je={class:"min-h-screen bg-gray-50"},Ue={class:"bg-white border-b border-gray-200 shadow-sm"},$e={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Se={class:"flex items-center justify-between"},Me={class:"flex items-center space-x-4"},Re={key:0,class:"flex items-center text-sm text-gray-500"},Le={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Pe={class:"flex flex-wrap gap-4 mb-8"},Ee={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Ie={class:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-all duration-200"},Ne={class:"flex items-center justify-between"},Be={class:"text-3xl font-bold text-orange-600 mt-2"},ze={class:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-all duration-200"},We={class:"flex items-center justify-between"},Ve={class:"text-3xl font-bold text-green-600 mt-2"},Fe={class:"mt-4"},He={class:"text-sm text-green-600"},Oe={class:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-all duration-200"},Je={class:"flex items-center justify-between"},Ge={class:"text-3xl font-bold text-indigo-600 mt-2"},Ke={class:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-all duration-200"},qe={class:"flex items-center justify-between"},Qe={class:"text-3xl font-bold text-red-600 mt-2"},Xe={class:"bg-white rounded-xl shadow-md border border-gray-100 mb-8"},Ye={class:"px-6 py-4 border-b border-gray-200"},Ze={class:"flex items-center justify-between"},et={class:"flex items-center space-x-3"},tt={key:0,class:"flex justify-center items-center py-12"},st={key:1,class:"divide-y divide-gray-200"},ot={key:0,class:"text-center py-12"},nt={class:"flex items-start justify-between"},rt={class:"flex-1"},lt={class:"flex items-center space-x-3 mb-3"},at={class:"text-lg font-semibold text-gray-900"},it={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4"},dt={class:"font-medium text-gray-900"},ut={class:"font-medium text-gray-900"},ct={class:"font-medium text-gray-900"},pt={class:"font-medium text-gray-900"},mt={class:"font-medium text-indigo-600"},gt={key:0,class:"mb-4"},vt={class:"text-gray-900"},ft={key:1,class:"mb-4"},ht={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mt-1"},yt={class:"text-yellow-800 text-sm"},xt={class:"flex flex-col space-y-2 ml-6"},wt=["onClick"],bt={key:0,class:"flex flex-col space-y-2"},kt=["onClick","disabled"],_t=["onClick","disabled"],Ct={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},At={class:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"},Tt={class:"p-6"},Dt={key:0,class:"space-y-6"},jt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ut={class:"font-medium text-gray-900"},$t={class:"font-medium text-gray-900"},St={class:"md:col-span-2"},Mt={class:"font-medium text-gray-900"},Rt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Lt={class:"font-medium text-gray-900"},Pt={class:"font-medium text-gray-900"},Et={key:0,class:"p-4 border border-dashed border-gray-300 rounded-lg text-sm text-gray-600"},It={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Nt={class:"flex items-center justify-center w-10 h-10 rounded bg-indigo-50 text-indigo-600"},Bt={key:0,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},zt={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Wt={key:2,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Vt={class:"flex-1 min-w-0"},Ft={class:"text-sm font-medium text-gray-900 truncate"},Ht={class:"text-xs text-gray-500"},Ot={class:"flex items-center space-x-2"},Jt=["onClick","disabled"],Gt=["onClick","disabled"],Kt={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},qt={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qt={class:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3"},Xt={key:0,class:"flex space-x-3"},Yt=["disabled"],Zt=["disabled"],es={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},ts={class:"bg-white rounded-xl shadow-xl max-w-md w-full"},ss={class:"p-6"},os={class:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3"},ns=["disabled"],rs={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},ls={class:"bg-white rounded-xl shadow-xl max-w-3xl w-full max-h-[80vh] overflow-auto"},as={class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},is={class:"p-6"},ds={class:"bg-gray-100 p-4 rounded font-mono text-xs overflow-auto whitespace-pre"},us={class:"px-6 py-4 border-t border-gray-200 flex justify-end"},gs={__name:"SuperAdminDashboard",setup(cs){const i=Te(),D=g(!1),z=g(!1),y=g(!1),I=g(!1),$=g("all"),j=g(!1),N=g(!1),m=g(null),_=g(""),ee=g(!1),S=g(!1),M=g(""),U=g("Not tested"),B=g(null),x=g({pendingApprovals:0,activeTemples:0,totalUsers:0,rejectedTemples:0,newThisWeek:0}),f=g([]),W=g([]),b=g(null),V=xe(()=>$.value==="all"?f.value:f.value.filter(s=>s.status.toLowerCase()===$.value.toLowerCase())),te=s=>{const e=((s==null?void 0:s.type)||"").toLowerCase(),l=((s==null?void 0:s.name)||(s==null?void 0:s.filename)||"").toLowerCase();return e.includes("pdf")||l.endsWith(".pdf")},se=s=>{const e=((s==null?void 0:s.type)||"").toLowerCase(),l=((s==null?void 0:s.name)||(s==null?void 0:s.filename)||"").toLowerCase();return e.startsWith("image/")||l.endsWith(".png")||l.endsWith(".jpg")||l.endsWith(".jpeg")||l.endsWith(".webp")},oe=s=>{if(!s&&s!==0)return"";const e=["B","KB","MB","GB"];let l=0,r=Number(s);for(;r>=1024&&l<e.length-1;)r/=1024,l++;return`${r.toFixed(1)} ${e[l]}`},ne=s=>{const e=[];return s.size&&e.push(oe(s.size)),s.type&&e.push(s.type),e.join(" â€¢ ")||"Document"},re=s=>typeof s=="string"?s:"",R=(s,e)=>{const l=(e||"").toLowerCase(),r=(s||"").toLowerCase(),o=l||r;return o.endsWith(".pdf")?"application/pdf":o.endsWith(".png")?"image/png":o.endsWith(".jpg")||o.endsWith(".jpeg")?"image/jpeg":""},le=s=>{console.log("normalizeTempleDocuments - input temple:",s);const e=[];Array.isArray(s.documents)&&s.documents.length>0&&(console.log("normalizeTempleDocuments - found documents array:",s.documents),s.documents.forEach((n,c)=>{const v=n.download_url||n.downloadUrl||n.url||n.file_url||n.fileUrl||n.path||"";console.log(`normalizeTempleDocuments - document ${c} URL:`,v),e.push({id:n.id||`${s.id||s.ID||"doc"}-${c}`,name:n.name||n.filename||`Document ${c+1}`,type:n.type||R(v,n.name||n.filename),size:n.size||null,url:v})})),[{key:"registration_cert",label:"Registration Certificate"},{key:"trust_deed",label:"Trust Deed"},{key:"property_docs",label:"Property Documents"}].forEach(({key:n,label:c})=>{const h=[s[`${n}_url`],s[`${n}Url`],s[n],s[`${n}_path`],s[`${n}_link`]].map(re).filter(Boolean).find(E=>E.startsWith("http")||E.startsWith("/"))||"";h&&(console.log(`normalizeTempleDocuments - found single field ${n}:`,h),e.push({id:n,name:c,type:R(h,c),size:null,url:h}))});const r=[s.additional_docs,s.additionalDocs,s.additional_documents,s.additionalDocuments].find(n=>Array.isArray(n));r&&r.length>0&&(console.log("normalizeTempleDocuments - found additional docs:",r),r.forEach((n,c)=>{const v=n.download_url||n.downloadUrl||n.url||n.file_url||n.fileUrl||n.path||"";console.log(`normalizeTempleDocuments - additional doc ${c} URL:`,v),e.push({id:n.id||`additional-${c}`,name:n.name||n.filename||`Additional Document ${c+1}`,type:n.type||R(v,n.name||n.filename),size:n.size||null,url:v})}));const o=new Set,a=e.filter(n=>{const c=`${n.id}-${n.name}`;return o.has(c)?!1:(o.add(c),!0)});return console.log("normalizeTempleDocuments - final docs:",a),a},F=(s,e,l="view")=>{console.log("buildDocUrl - doc:",s),console.log("buildDocUrl - appId:",e);let r=s.download_url||s.downloadUrl||s.url||s.file_url||s.fileUrl||s.path;if(console.log("buildDocUrl - direct (original):",r),r){if(r.includes("/files/")&&(r=r.replace(/\/files\//g,"/"),console.log("buildDocUrl - removed /files/ from path:",r)),r.startsWith("http")){if(r.includes("://localhost:8080/")&&!r.includes("/uploads/")){const n=r.split("://localhost:8080/");if(n.length===2){const c=n[1];!c.startsWith("uploads/")&&!c.startsWith("api/")&&!c.startsWith("public/")&&(r=`${n[0]}://localhost:8080/uploads/${c}`,console.log("buildDocUrl - added uploads prefix:",r))}}return console.log("buildDocUrl - returning full HTTP URL:",r),r}let o;r.startsWith("/uploads/")?o=r:r.startsWith("uploads/")?o=`/${r}`:r.startsWith("/")?o=`/uploads${r}`:o=`/uploads/${r}`;const a=`http://localhost:8080${o}`;return console.log("buildDocUrl - converted to full URL:",a),a}if(s.id&&e){const o=`http://localhost:8080/api/v1/entities/${encodeURIComponent(e)}/documents/${encodeURIComponent(s.id)}/${l}`;return console.log("buildDocUrl - using full API endpoint:",o),o}return console.log("buildDocUrl - no URL found, returning empty"),""},ae=s=>{try{window.open(s,"_blank","noopener,noreferrer")||i.warning("Pop-up blocked. Please allow pop-ups for this site.")}catch(e){console.error("Error opening new tab:",e),i.error("Unable to open document in a new tab.")}},C=s=>((s||"").trim()||"document").replace(/[\\/:*?"<>|\u0000-\u001F]/g,"_").slice(0,200),ie=s=>{if(!s)return"";const e=/filename\*\s*=\s*([^;]+)/i.exec(s);if(e){let r=e[1].trim();r=r.replace(/^"+|"+$/g,""),r.toLowerCase().startsWith("utf-8''")&&(r=r.substring(7));try{return C(decodeURIComponent(r))}catch{return C(r)}}const l=/filename\s*=\s*("?)([^";]+)\1/i.exec(s);return l&&l[2]?C(l[2]):""},de=s=>{try{const l=new URL(s,window.location.origin).pathname.split("/").filter(Boolean).pop()||"";return C(decodeURIComponent(l))}catch{const l=(s||"").split("?")[0].split("#")[0].split("/").filter(Boolean).pop()||"";try{return C(decodeURIComponent(l))}catch{return C(l)}}},ue=(s,e,l)=>C(ie(l)||(s==null?void 0:s.name)||(s==null?void 0:s.filename)||de(e)||"document"),ce=async s=>{if(console.log("viewDocument called with doc:",s),!m.value){console.log("viewDocument - no selected application");return}const e=F(s,m.value.id,"view");if(console.log("viewDocument - built URL:",e),!e){i.error("View URL not available for this document.");return}try{console.log("viewDocument - opening URL directly in new tab:",e),ae(e)}catch(l){console.error("Error viewing document:",l),i.error("Failed to open document for viewing.")}},pe=async s=>{if(console.log("downloadDocument called with doc:",s),!m.value)return;const e=m.value.id,l=F(s,e,"download"),r=l?l.includes("?")?`${l}&download=true&filename=${encodeURIComponent(s.name||s.filename||"document")}`:`${l}?download=true&filename=${encodeURIComponent(s.name||s.filename||"document")}`:"";if(console.log("downloadDocument - built download URL:",r),!r){i.error("Download URL not available for this document.");return}const o=s.id||s.name;b.value=o;try{console.log("downloadDocument - trying fetch blob method");const a=localStorage.getItem("auth_token")||localStorage.getItem("authToken")||"",n=await fetch(r,{method:"GET",headers:{...a?{Authorization:`Bearer ${a}`}:{},Accept:"*/*"},credentials:"include"});if(!n.ok)throw new Error(`HTTP ${n.status}`);const c=n.headers.get("Content-Disposition")||n.headers.get("content-disposition")||"",v=n.headers.get("Content-Type")||n.headers.get("content-type")||(s==null?void 0:s.type)||R(r,(s==null?void 0:s.name)||(s==null?void 0:s.filename))||"application/octet-stream",h=await n.blob(),E=h.type?h:new Blob([h],{type:v}),ye=ue(s,r,c),Q=URL.createObjectURL(E),A=document.createElement("a");A.style.display="none",A.href=Q,A.download=ye,document.body.appendChild(A),A.click(),setTimeout(()=>{URL.revokeObjectURL(Q),A.remove()},0),i.success("Download ready"),b.value=null;return}catch(a){console.warn("downloadDocument - fetch blob method failed, falling back:",a)}try{console.log("downloadDocument - falling back to window.location"),window.location.href=r,setTimeout(()=>{b.value=null},2e3),i.info("Attempting direct download");return}catch(a){console.warn("downloadDocument - window.location failed, trying iframe:",a)}try{console.log("downloadDocument - trying iframe method");const a=document.createElement("iframe");a.style.display="none",a.src=r,document.body.appendChild(a),setTimeout(()=>{document.body.contains(a)&&document.body.removeChild(a)},5e3),i.info("Download initiated via alternative method"),b.value=null;return}catch(a){console.warn("downloadDocument - iframe method failed, last resort new tab:",a)}try{window.open(r,"_blank","noopener,noreferrer")?i.info('Document opened in new tab - use "Save As" to download'):i.warning("Please allow pop-ups and try again")}catch(a){console.error("All download methods failed:",a),i.error("Unable to download document. Please contact support.")}finally{b.value=null}},L=async()=>{try{I.value=!0,U.value="Loading...";const s=await T.getTempleApprovalCounts();s&&s.success&&s.data?(x.value={pendingApprovals:s.data.pendingApprovals||0,activeTemples:s.data.activeTemples||0,totalUsers:s.data.totalUsers||0,rejectedTemples:s.data.rejectedTemples||0,newThisWeek:s.data.newThisWeek||0},U.value="Success",B.value=new Date().toLocaleString(),i.success("Dashboard stats updated from API")):(U.value="Invalid response format",x.value.pendingApprovals===0&&(x.value={pendingApprovals:5,activeTemples:32,totalUsers:178,rejectedTemples:3,newThisWeek:4}),i.warning("Using fallback data for dashboard stats"))}catch(s){console.error("Failed to load temple counts:",s),U.value=`Error: ${s.message}`,i.error("Failed to load dashboard statistics")}finally{I.value=!1}},me=async()=>{M.value=`Testing temple counts API...
`,S.value=!0;try{const s=[];s.push(`==== TEMPLE COUNTS API TEST ====
`),s.push("Testing direct API call to /api/v1/superadmin/temple-approval-count...");try{const e=await fetch("/api/v1/superadmin/temple-approval-count",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(e.ok){const l=await e.json();s.push(`Direct API Response Status: ${e.status}`),s.push(`Direct API Response Data: ${JSON.stringify(l,null,2)}`)}else{s.push(`Direct API Error: ${e.status} ${e.statusText}`);const l=await e.text();s.push(`Error details: ${l}`)}}catch(e){s.push(`Direct API Error: ${e.message}`)}s.push(`
==== SERVICE METHOD TEST ====
`);try{const e=await T.getTempleApprovalCounts();s.push(`Service Response: ${JSON.stringify(e,null,2)}`),e.success&&e.data?(x.value={pendingApprovals:e.data.pendingApprovals||0,activeTemples:e.data.activeTemples||0,totalUsers:e.data.totalUsers||0,rejectedTemples:e.data.rejectedTemples||0,newThisWeek:e.data.newThisWeek||0},s.push(`Updated dashboard stats: ${JSON.stringify(x.value,null,2)}`),B.value=new Date().toLocaleString(),i.success("Stats updated from API test!")):s.push("Service method returned failure")}catch(e){s.push(`Service Error: ${e.message}`)}s.push(`
==== CURRENT STATS ====
`),s.push(`Current summaryStats: ${JSON.stringify(x.value,null,2)}`),s.push(`Last update: ${B.value||"Never"}`),s.push(`API Status: ${U.value}`),M.value=s.join(`
`)}catch(s){M.value+=`
Error running test: ${s.message}`}},H=async()=>{try{D.value=!0;const s=await T.getPendingEntities().catch(e=>(console.error("Error fetching pending entities:",e),null));s&&s.success&&s.data?(f.value=s.data.map(e=>{const l=(e.Status||e.status||"pending").toLowerCase(),r=e.CreatedAt||e.createdAt||e.SubmittedAt||e.submittedAt||e.created_at||e.submitted_at||new Date().toISOString();let o="";if(e.Address&&e.Address.trim())o=e.Address.trim();else if(e.address&&e.address.trim())o=e.address.trim();else{const a=[],n=e.StreetAddress||e.streetAddress||e.street_address;n&&n.trim()&&a.push(n.trim());const c=e.City||e.city;c&&c.trim()&&a.push(c.trim());const v=e.State||e.state;v&&v.trim()&&a.push(v.trim());const h=e.Pincode||e.pincode||e.PostalCode||e.postalCode||e.zipcode;h&&h.toString().trim()&&a.push(h.toString().trim()),o=a.filter(Boolean).join(", ")}return{id:e.ID||e.id,templeName:e.Name||e.name,adminName:e.CreatedBy||e.createdBy||"Unknown",adminEmail:e.Email||e.email||"unknown@example.com",phone:e.Phone||e.phone,city:e.City||e.city,state:e.State||e.state,address:o||"Address not provided",status:l,submittedAt:r,approvedAt:e.ApprovedAt||e.approvedAt,rejectedAt:e.RejectedAt||e.rejectedAt,notes:e.Notes||e.notes,registrationType:e.TempleType||e.templeType,documents:le(e)}}),i.success(`Loaded ${f.value.length} temple applications`)):f.value=[]}catch(s){console.error("Failed to load pending temples:",s),i.error("Failed to load pending temple applications")}finally{D.value=!1}},O=async()=>{try{z.value=!0;try{const s=await T.getRecentActivities();if(s&&s.success&&s.data){W.value=s.data;return}}catch{}W.value=[]}catch(s){console.error("Failed to load activities:",s),i.error("Failed to load recent activities")}finally{z.value=!1}},J=async()=>{try{D.value=!0,await Promise.all([L(),H(),O()]),i.success("Data refreshed successfully")}catch(s){console.error("Error refreshing data:",s),i.error("Failed to refresh data")}finally{D.value=!1}},ge=s=>{m.value=s,j.value=!0},P=()=>{j.value=!1,m.value=null},G=async s=>{if(!y.value)try{y.value=!0,j.value&&P();try{await T.approveEntity(s.id,{notes:"Approved by super admin"})}catch{await new Promise(l=>setTimeout(l,500))}const e=f.value.findIndex(l=>l.id===s.id);e!==-1&&(f.value[e].status="approved",f.value[e].approvedAt=new Date().toISOString()),await L(),i.success(`${s.templeName} has been approved successfully!`)}catch(e){console.error("Error approving temple:",e),i.error("Failed to approve temple. Please try again.")}finally{y.value=!1}},K=s=>{m.value=s,N.value=!0,j.value&&P()},q=()=>{N.value=!1,m.value=null,_.value=""},ve=async()=>{if(!_.value.trim()){i.error("Please provide a reason for rejection");return}if(!(y.value||!m.value))try{y.value=!0;const s=m.value;try{await T.rejectEntity(s.id,{notes:_.value,reason:_.value})}catch{await new Promise(l=>setTimeout(l,500))}const e=f.value.findIndex(l=>l.id===s.id);e!==-1&&(f.value[e].status="rejected",f.value[e].rejectedAt=new Date().toISOString(),f.value[e].notes=_.value),await L(),i.success(`${s.templeName} application has been rejected`),q()}catch(s){console.error("Error rejecting temple:",s),i.error("Failed to reject temple. Please try again.")}finally{y.value=!1}},fe=s=>({pending:"bg-orange-100 text-orange-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",he=s=>{if(!s)return"Not available";try{const e=new Date(s);return isNaN(e.getTime())?"Invalid date":e.toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Date unavailable"}};return we(async()=>{await L(),await Promise.all([H(),O()])}),(s,e)=>{var r;const l=_e("router-link");return u(),d("div",je,[t("div",Ue,[t("div",$e,[t("div",Se,[e[8]||(e[8]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900",style:{"font-family":"'Roboto', sans-serif"}}," Super Admin Dashboard "),t("p",{class:"mt-1 text-sm text-gray-600"}," Manage temple registrations and system oversight ")],-1)),t("div",Me,[e[7]||(e[7]=t("div",{class:"bg-indigo-50 text-indigo-800 px-3 py-1 rounded-full text-sm font-medium"}," System Administrator ",-1)),I.value?(u(),d("div",Re,[...e[6]||(e[6]=[t("div",{class:"animate-spin rounded-full h-4 w-4 border-2 border-indigo-600 border-t-transparent mr-2"},null,-1),k(" Loading stats... ",-1)])])):w("",!0)])])])]),t("div",Le,[t("div",Pe,[ee.value?(u(),d("button",{key:0,onClick:me,class:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700 transition-colors duration-200"},[...e[9]||(e[9]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),k(" Test Counts API ",-1)])])):w("",!0),be(l,{to:"/superadmin/reports",class:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors duration-200"},{default:ke(()=>[...e[10]||(e[10]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),k(" Reports ",-1)])]),_:1}),t("button",{onClick:J,class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors duration-200"},[...e[11]||(e[11]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582M20 12a8 8 0 10-15.418-3M20 12h-5"})],-1),k(" Refresh ",-1)])])]),t("div",Ee,[t("div",Ie,[t("div",Ne,[t("div",null,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-gray-600 uppercase tracking-wide"},"Pending Approvals",-1)),t("p",Be,p(x.value.pendingApprovals),1)]),e[13]||(e[13]=t("div",{class:"bg-orange-100 p-3 rounded-lg"},[t("svg",{class:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))]),e[14]||(e[14]=t("div",{class:"mt-4"},[t("span",{class:"text-sm text-gray-500"},"Awaiting review")],-1))]),t("div",ze,[t("div",We,[t("div",null,[e[15]||(e[15]=t("p",{class:"text-sm font-medium text-gray-600 uppercase tracking-wide"},"Active Temples",-1)),t("p",Ve,p(x.value.activeTemples),1)]),e[16]||(e[16]=t("div",{class:"bg-green-100 p-3 rounded-lg"},[t("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2M5 21H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1))]),t("div",Fe,[t("span",He,"+"+p(x.value.newThisWeek)+" this week",1)])]),t("div",Oe,[t("div",Je,[t("div",null,[e[17]||(e[17]=t("p",{class:"text-sm font-medium text-gray-600 uppercase tracking-wide"},"Total Users",-1)),t("p",Ge,p(x.value.totalUsers),1)]),e[18]||(e[18]=t("div",{class:"bg-indigo-100 p-3 rounded-lg"},[t("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2m.356-1.857a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})])],-1))]),e[19]||(e[19]=t("div",{class:"mt-4"},[t("span",{class:"text-sm text-gray-500"},"Across all temples")],-1))]),t("div",Ke,[t("div",qe,[t("div",null,[e[20]||(e[20]=t("p",{class:"text-sm font-medium text-gray-600 uppercase tracking-wide"},"Rejected",-1)),t("p",Qe,p(x.value.rejectedTemples),1)]),e[21]||(e[21]=t("div",{class:"bg-red-100 p-3 rounded-lg"},[t("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01M5.062 19h13.876c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L3.33 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1))]),e[22]||(e[22]=t("div",{class:"mt-4"},[t("span",{class:"text-sm text-gray-500"},"This month")],-1))])]),t("div",Xe,[t("div",Ye,[t("div",Ze,[e[25]||(e[25]=t("h2",{class:"text-xl font-bold text-gray-900",style:{"font-family":"'Roboto', sans-serif"}}," Pending Temple Approvals ",-1)),t("div",et,[X(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>$.value=o),class:"text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...e[23]||(e[23]=[t("option",{value:"all"},"All Status",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"approved"},"Approved",-1),t("option",{value:"rejected"},"Rejected",-1)])],512),[[Ce,$.value]]),t("button",{onClick:J,class:"bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors duration-200"},[...e[24]||(e[24]=[t("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),k(" Refresh ",-1)])])])])]),D.value?(u(),d("div",tt,[...e[26]||(e[26]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),t("span",{class:"ml-3 text-gray-600"},"Loading temple applications...",-1)])])):(u(),d("div",st,[V.value.length===0?(u(),d("div",ot,[...e[27]||(e[27]=[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No applications found",-1),t("p",{class:"mt-1 text-sm text-gray-500"},"No temple applications match your current filter.",-1)])])):w("",!0),(u(!0),d(Y,null,Z(V.value,o=>{var a;return u(),d("div",{key:o.id,class:"p-6 hover:bg-gray-50 transition-colors duration-200"},[t("div",nt,[t("div",rt,[t("div",lt,[t("h3",at,p(o.templeName),1),t("span",{class:De([fe(o.status),"px-2 py-1 rounded-full text-xs font-medium uppercase tracking-wide"])},p(o.status),3)]),t("div",it,[t("div",null,[e[28]||(e[28]=t("p",{class:"text-sm text-gray-600"},"Email",-1)),t("p",dt,p(o.adminEmail),1)]),t("div",null,[e[29]||(e[29]=t("p",{class:"text-sm text-gray-600"},"Phone",-1)),t("p",ut,p(o.phone||"Not provided"),1)]),t("div",null,[e[30]||(e[30]=t("p",{class:"text-sm text-gray-600"},"Location",-1)),t("p",ct,p(o.city)+", "+p(o.state),1)]),t("div",null,[e[31]||(e[31]=t("p",{class:"text-sm text-gray-600"},"Submitted",-1)),t("p",pt,p(he(o.submittedAt)),1)]),t("div",null,[e[32]||(e[32]=t("p",{class:"text-sm text-gray-600"},"Documents",-1)),t("p",mt,p(((a=o.documents)==null?void 0:a.length)||0)+" files",1)])]),o.address?(u(),d("div",gt,[e[33]||(e[33]=t("p",{class:"text-sm text-gray-600"},"Address",-1)),t("p",vt,p(o.address),1)])):w("",!0),o.notes?(u(),d("div",ft,[e[34]||(e[34]=t("p",{class:"text-sm text-gray-600"},"Admin Notes",-1)),t("div",ht,[t("p",yt,p(o.notes),1)])])):w("",!0)]),t("div",xt,[t("button",{onClick:n=>ge(o),class:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors duration-200 whitespace-nowrap"},[...e[35]||(e[35]=[t("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),k(" View Details ",-1)])],8,wt),o.status==="pending"?(u(),d("div",bt,[t("button",{onClick:n=>G(o),class:"bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-700 transition-colors duration-200 whitespace-nowrap",disabled:y.value},[...e[36]||(e[36]=[t("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),k(" Approve ",-1)])],8,kt),t("button",{onClick:n=>K(o),class:"bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-red-700 transition-colors duration-200 whitespace-nowrap",disabled:y.value},[...e[37]||(e[37]=[t("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),k(" Reject ",-1)])],8,_t)])):w("",!0)])])])}),128))]))]),j.value?(u(),d("div",Ct,[t("div",At,[t("div",{class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},[e[39]||(e[39]=t("h3",{class:"text-lg font-bold text-gray-900"},"Temple Application Details",-1)),t("button",{onClick:P,class:"text-gray-400 hover:text-gray-600"},[...e[38]||(e[38]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Tt,[m.value?(u(),d("div",Dt,[t("div",null,[e[43]||(e[43]=t("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Temple Information",-1)),t("div",jt,[t("div",null,[e[40]||(e[40]=t("label",{class:"text-sm text-gray-600"},"Temple Name",-1)),t("p",Ut,p(m.value.templeName),1)]),t("div",null,[e[41]||(e[41]=t("label",{class:"text-sm text-gray-600"},"Temple Type",-1)),t("p",$t,p(m.value.registrationType||"Religious Trust"),1)]),t("div",St,[e[42]||(e[42]=t("label",{class:"text-sm text-gray-600"},"Address",-1)),t("p",Mt,p(m.value.address),1)])])]),t("div",null,[e[47]||(e[47]=t("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Administrator Information",-1)),t("div",Rt,[t("div",null,[e[44]||(e[44]=t("label",{class:"text-sm text-gray-600"},"Email",-1)),t("p",Lt,p(m.value.adminEmail),1)]),t("div",null,[e[45]||(e[45]=t("label",{class:"text-sm text-gray-600"},"Phone",-1)),t("p",Pt,p(m.value.phone||"Not provided"),1)]),e[46]||(e[46]=t("div",null,[t("label",{class:"text-sm text-gray-600"},"Role"),t("p",{class:"font-medium text-gray-900"},"Temple Administrator")],-1))])]),t("div",null,[e[54]||(e[54]=t("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Uploaded Documents",-1)),!m.value.documents||m.value.documents.length===0?(u(),d("div",Et," No documents uploaded or available. ")):(u(),d("div",It,[(u(!0),d(Y,null,Z(m.value.documents,o=>(u(),d("div",{key:o.id||o.name,class:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg"},[t("div",Nt,[te(o)?(u(),d("svg",Bt,[...e[48]||(e[48]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11c0-.943 0-1.414.293-1.707C12.586 9 13.057 9 14 9h1c.943 0 1.414 0 1.707.293C17 9.586 17 10.057 17 11v2c0 .943 0 1.414-.293 1.707C16.414 15 15.943 15 15 15h-1m-4 0H9c-.943 0-1.414 0-1.707-.293C7 14.414 7 13.943 7 13v-2c0-.943 0-1.414.293-1.707C7.586 9 8.057 9 9 9h1m2 6V9m0 0V5.5c0-.465 0-.697.146-.854C12.293 4.5 12.526 4.5 12.99 4.5h1.02c.465 0 .697 0  .854.146.146.157.146.389.146.854V9"},null,-1)])])):se(o)?(u(),d("svg",zt,[...e[49]||(e[49]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4-4 4 4 4-4 4 4M4 8h16M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"},null,-1)])])):(u(),d("svg",Wt,[...e[50]||(e[50]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])]))]),t("div",Vt,[t("p",Ft,p(o.name||o.filename||"document"),1),t("p",Ht,p(ne(o)),1)]),t("div",Ot,[t("button",{onClick:a=>ce(o),class:"px-2 py-1 text-indigo-600 hover:text-indigo-800 text-sm font-medium rounded hover:bg-indigo-50",disabled:b.value===(o.id||o.name),title:"View"},[...e[51]||(e[51]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,Jt),t("button",{onClick:a=>pe(o),class:"px-2 py-1 text-gray-700 hover:text-gray-900 text-sm font-medium rounded hover:bg-gray-100",disabled:b.value===(o.id||o.name),title:"Download"},[b.value===(o.id||o.name)?(u(),d("svg",Kt,[...e[52]||(e[52]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(u(),d("svg",qt,[...e[53]||(e[53]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])]))],8,Gt)])]))),128))]))])])):w("",!0)]),t("div",Qt,[t("button",{onClick:P,class:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors duration-200"}," Close "),((r=m.value)==null?void 0:r.status)==="pending"?(u(),d("div",Xt,[t("button",{onClick:e[1]||(e[1]=o=>G(m.value)),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200",disabled:y.value}," Approve Temple ",8,Yt),t("button",{onClick:e[2]||(e[2]=o=>K(m.value)),class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200",disabled:y.value}," Reject Application ",8,Zt)])):w("",!0)])])])):w("",!0),N.value?(u(),d("div",es,[t("div",ts,[e[56]||(e[56]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-bold text-gray-900"},"Reject Application")],-1)),t("div",ss,[e[55]||(e[55]=t("p",{class:"text-gray-600 mb-4"},"Please provide a reason for rejecting this temple application:",-1)),X(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=o=>_.value=o),class:"w-full h-32 border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none",placeholder:"Enter rejection reason..."},null,512),[[Ae,_.value]])]),t("div",os,[t("button",{onClick:q,class:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors duration-200"}," Cancel "),t("button",{onClick:ve,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200",disabled:y.value}," Confirm Reject ",8,ns)])])])):w("",!0),S.value?(u(),d("div",rs,[t("div",ls,[t("div",as,[e[58]||(e[58]=t("h3",{class:"text-lg font-bold text-gray-900"},"Temple Counts API Debug",-1)),t("button",{onClick:e[4]||(e[4]=o=>S.value=!1),class:"text-gray-400 hover:text-gray-600"},[...e[57]||(e[57]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",is,[t("div",ds,p(M.value),1)]),t("div",us,[t("button",{onClick:e[5]||(e[5]=o=>S.value=!1),class:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg"}," Close ")])])])):w("",!0)])])}}};export{gs as default};
