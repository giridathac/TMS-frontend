const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Bqden_Qr.js","assets/index-e-kXGkzU.css"])))=>i.map(i=>d[i]);
import{U as we,q as xe,W as _e,e as ke,r as B,c as y,C as De,D as j,s as Te,h as n,j as T,i as t,z as Se,E as Ie,H as Ae,G as F,t as l,n as U,w as V,k as J,F as L,l as M,v as se,Y as Re,A as Pe,o as i}from"./index-Bqden_Qr.js";const Ee={class:"min-h-screen bg-gray-50"},Ce={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4"},Be={class:"bg-white shadow-sm border-b border-gray-200 rounded-2xl"},Fe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Ue={class:"flex items-center justify-between"},Le={class:"text-gray-600 mt-1"},Me={key:0,class:"text-indigo-600 font-medium"},Ne={key:1,class:"text-indigo-600 font-medium"},Oe={key:2,class:"text-indigo-600 font-medium"},qe={class:"flex items-center space-x-4"},Ve={class:"bg-indigo-50 px-4 py-2 rounded-lg border border-indigo-200"},$e={class:"text-indigo-800 font-medium"},je={class:"text-indigo-600 text-sm ml-2"},ze={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Ye={key:0,class:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4"},He={class:"flex"},Je={class:"ml-3"},Ge={class:"mt-2 text-sm text-red-700"},We={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8"},Xe={class:"p-6"},Ze={class:"flex space-x-4 flex-wrap"},Ke={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8"},Qe={class:"p-6 border-b border-gray-200"},et={class:"text-xl font-bold text-gray-900"},tt={class:"text-gray-600 mt-1"},rt={class:"p-6"},at={class:"mb-6"},ot={class:"relative"},st=["disabled"],nt=["value"],lt={key:0,class:"mt-2 text-sm text-orange-600"},it={key:0},dt={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},ut={class:"flex flex-wrap gap-2"},ct=["onClick","disabled"],vt={key:1},gt={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},pt={class:"flex flex-wrap gap-2"},mt=["onClick","disabled"],yt={key:0},ft={class:"relative"},bt=["disabled"],ht={key:1},wt={class:"bg-gray-50 border border-gray-200 rounded-md px-3 py-2"},xt={class:"text-gray-700"},_t={key:2},kt={key:3,class:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg"},Dt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Tt=["disabled"],St=["disabled"],It={class:"border-t border-gray-200 pt-6"},At={class:"flex flex-col md:flex-row md:items-center md:justify-between"},Rt={class:"flex items-center space-x-3"},Pt={class:"relative"},Et=["disabled"],Ct=["value"],Bt=["disabled"],Ft={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},Ut={key:1,class:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Lt={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},Mt={class:"p-6"},Nt={class:"flex flex-wrap gap-2"},Ot={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},qt={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-purple-100 text-purple-800"},Vt={class:"font-medium mr-1"},$t={key:0},jt={key:1},zt={key:2},Yt={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},Ht={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},Jt={class:"font-medium mr-1"},Gt={key:0},Wt={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},Xt={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},Zt={key:1,class:"mt-6 bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},Kt={class:"p-6 border-b border-gray-200"},Qt={class:"text-sm text-gray-600 mt-1"},er={class:"overflow-x-auto"},tr={class:"min-w-full divide-y divide-gray-200"},rr={class:"bg-gray-50"},ar={class:"bg-white divide-y divide-gray-200"},or={key:0,class:"p-4 border-t border-gray-200 text-center text-sm text-gray-600"},lr={__name:"BirthdaysReport",setup(sr){const g=De();Pe();const _=we(),p=xe(),s=_e(),{showToast:u}=ke(),d=B("birthdays"),k=B("all"),S=B("monthly"),N=B("pdf"),I=B(new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0]),A=B(new Date(new Date().getFullYear(),new Date().getMonth()+1,0).toISOString().split("T")[0]),E=B("all");B(!0);const z=[{label:"Weekly",value:"weekly"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"},{label:"Custom Range",value:"custom"}],G=[{label:"PDF",value:"pdf"},{label:"CSV",value:"csv"},{label:"Excel",value:"excel"}],ne=[{label:"All Statuses",value:"all"},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"New Members",value:"new"}],W=y(()=>{var r,e;try{const o=(p==null?void 0:p.user)||{},a=(o.role||o.userType||"").toString().toLowerCase(),f=Array.isArray(o.roles)?o.roles.map(v=>(v||"").toString().toLowerCase()):[],h=!!(o.isSuperAdmin||o.is_super_admin);return a==="superadmin"||f.includes("superadmin")||h||((r=g==null?void 0:g.query)==null?void 0:r.from)==="superadmin"}catch{return((e=g==null?void 0:g.query)==null?void 0:e.from)==="superadmin"}}),b=y(()=>{var r,e,o,a;try{return((r=g==null?void 0:g.params)==null?void 0:r.tenantId)||((e=g==null?void 0:g.query)==null?void 0:e.tenantId)||((o=p==null?void 0:p.user)==null?void 0:o.tenantId)||((a=p==null?void 0:p.user)==null?void 0:a.tenant_id)||(typeof localStorage<"u"?localStorage.getItem("current_tenant_id"):null)||""}catch{return""}}),m=y(()=>{try{return!!W.value}catch{return!1}}),c=y(()=>{var r,e,o;try{if(m.value){if((r=g==null?void 0:g.query)!=null&&r.tenants){const f=g.query.tenants.split(",").map(h=>String(h).trim()).filter(Boolean);return Array.from(new Set(f))}if((e=g==null?void 0:g.query)!=null&&e.tenantId)return[String(g.query.tenantId).trim()].filter(Boolean);if((o=g==null?void 0:g.params)!=null&&o.tenantId)return[String(g.params.tenantId).trim()].filter(Boolean);const a=b.value;return a?[String(a)]:[]}else{const a=b.value;return a?[String(a)]:[]}}catch{return[]}}),le=y(()=>{var r,e;try{return((r=p==null?void 0:p.user)==null?void 0:r.name)||((e=p==null?void 0:p.user)==null?void 0:e.username)||"Tenant User"}catch{return"User"}}),X=y(()=>{try{return(s==null?void 0:s.error)||null}catch{return null}}),ie=y(()=>{try{return(_==null?void 0:_.temples)||[]}catch{return[]}}),R=y(()=>{try{const r=ie.value;if(!r||r.length===0)return[];const e=c.value;return!e||e.length===0?[]:r.filter(o=>{const a=String(o.created_by||o.createdBy||""),f=String(o.tenant_id||o.tenantId||o.sourceTenantId||"");return e.some(h=>a===String(h)||f===String(h))})}catch{return[]}}),de=y(()=>{try{return(s==null?void 0:s.loading)||!1}catch{return!1}}),Y=y(()=>{try{return(s==null?void 0:s.downloadLoading)||!1}catch{return!1}}),C=y(()=>de.value||Y.value),q=y(()=>{try{return(s==null?void 0:s.reportPreview)||{}}catch{return{}}}),ue=y(()=>{try{const r=q.value;return r&&r.data&&Array.isArray(r.data)&&r.data.length>0}catch{return!1}}),Z=y(()=>{var r;try{return((r=q.value)==null?void 0:r.columns)||[]}catch{return[]}}),$=y(()=>{var r;try{return((r=q.value)==null?void 0:r.data)||[]}catch{return[]}}),K=()=>{try{s&&typeof s.clearError=="function"&&s.clearError()}catch{}},ce=()=>{O()},H=()=>{try{switch(d.value){case"birthdays":return"Devotee Birthdays";case"devotees":return"Devotee List";case"statusActive":return"Active Devotees";case"statusInactive":return"Inactive Devotees";case"profile":return"Devotee Profile";default:return"Report"}}catch{return"Report"}},ve=()=>{try{switch(d.value){case"birthdays":return"devotee birthday data";case"devotees":return"devotee list data";case"statusActive":return"active devotee data";case"statusInactive":return"inactive devotee data";case"profile":return"devotee profile data";default:return"report data"}}catch{return"report data"}},ge=()=>{try{switch(d.value){case"statusActive":return"Active Only";case"statusInactive":return"Inactive Only";case"devotees":return ye(E.value);default:return"All"}}catch{return"All"}},Q=r=>{try{S.value=r;const e=new Date;if(r==="weekly"){const o=new Date,a=new Date;a.setDate(o.getDate()-6),I.value=a.toISOString().split("T")[0],A.value=o.toISOString().split("T")[0]}else if(r==="monthly"){const o=new Date(e.getFullYear(),e.getMonth(),1),a=new Date(e.getFullYear(),e.getMonth()+1,0);I.value=o.toISOString().split("T")[0],A.value=a.toISOString().split("T")[0]}else if(r==="yearly"){const o=e.getFullYear();I.value=new Date(o,0,1).toISOString().split("T")[0],A.value=new Date(o,11,31).toISOString().split("T")[0]}O()}catch(e){console.error("Error setting active filter:",e),u("Failed to set filter. Please try again.","error")}},pe=r=>{try{if(r==="all")return"All Temples";if(!R.value||!Array.isArray(R.value))return"Unknown Temple";const e=R.value.find(o=>{var a;return((a=o==null?void 0:o.id)==null?void 0:a.toString())===(r==null?void 0:r.toString())});return(e==null?void 0:e.name)||"Unknown Temple"}catch{return"Unknown Temple"}},me=r=>{try{const e=z.find(o=>o.value===r);return e?e.label:"Unknown"}catch{return"Unknown"}},ee=r=>{try{const e=G.find(o=>o.value===r);return e?e.label:"Unknown"}catch{return"Unknown"}},ye=r=>{try{const e=ne.find(o=>o.value===r);return e?e.label:"Unknown"}catch{return"Unknown"}},te=r=>{if(!r)return"";try{return new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return r||""}},re=()=>{try{const r={dateRange:S.value||"monthly",startDate:I.value,endDate:A.value,format:N.value||"pdf"};if(m.value)if(r.isSuperAdmin=!0,c.value&&c.value.length>1){if(r.entityIds=c.value.filter(e=>e&&String(e).trim()),r.entityIds.length===0)throw new Error("No valid tenants selected for report generation")}else if(c.value&&c.value.length===1){if(r.entityId=String(c.value[0]).trim(),!r.entityId)throw new Error("Invalid tenant ID for report generation")}else throw new Error("No tenants selected for report generation");else{if(!b.value||!String(b.value).trim())throw new Error("Tenant ID is required for report generation");r.entityId=String(b.value).trim()}if(k.value&&k.value!=="all"){if(!R.value.find(o=>String(o.id)===String(k.value)))throw new Error("Selected temple is not available for the current tenant selection");r.templeId=k.value.toString()}return d.value==="statusActive"?r.status="active":d.value==="statusInactive"?r.status="inactive":d.value==="devotees"&&E.value&&E.value!=="all"&&(r.status=E.value),r}catch(r){throw console.error("Error building report params:",r),r}},O=async()=>{try{if(!m.value&&!b.value){console.warn("No tenant ID available for preview");return}if(m.value&&(!c.value||c.value.length===0)){console.warn("No tenant IDs available for superadmin preview");return}if(R.value.length===0){console.warn("No temples available for preview");return}let r;try{r={...re()},delete r.format}catch(o){console.error("Error building preview params:",o),u((o==null?void 0:o.message)||"Error building parameters","error");return}if(!s){u("Reports store is not available","error");return}let e=null;switch(d.value){case"birthdays":typeof s.getDevoteeBirthdaysPreview=="function"?e=await s.getDevoteeBirthdaysPreview(r):u("Birthday reports preview is not available","error");break;case"devotees":case"statusActive":case"statusInactive":typeof s.getDevoteeListPreview=="function"?e=await s.getDevoteeListPreview(r):u("Devotee list preview is not available","error");break;case"profile":typeof s.getDevoteeProfilePreview=="function"?e=await s.getDevoteeProfilePreview(r):u("Devotee profile preview is not available yet","warning");break;default:u("Unknown report type selected","error");break}}catch(r){console.error("Error fetching preview:",r);const e=(r==null?void 0:r.message)||"Unknown error";u(`Failed to fetch report preview: ${e}`,"error")}},fe=async()=>{try{if(K(),!m.value&&!b.value){u("Tenant information is missing. Please refresh the page.","error");return}if(m.value&&(!c.value||c.value.length===0)){u("Tenant selection is required. Please go back and select tenants.","error");return}if(R.value.length===0){u("No temples available for the selected tenant(s). Please check your tenant selection.","error");return}if(S.value==="custom"&&(!I.value||!A.value)){u("Please select both start and end dates for custom range","error");return}if(new Date(I.value)>new Date(A.value)){u("Start date must be before end date","error");return}if(!N.value){u("Please select a format for the report","error");return}let r;try{r=re()}catch(a){u((a==null?void 0:a.message)||"Error building parameters","error");return}if(!r.entityId&&!r.entityIds){u("Entity ID is required for report generation","error");return}if(!r.format){u("Format is required for report generation","error");return}if(!s){u("Reports store is not available","error");return}let e;try{switch(d.value){case"birthdays":if(typeof s.downloadDevoteeBirthdaysReport=="function")e=await s.downloadDevoteeBirthdaysReport(r);else throw new Error("Birthday report download functionality is not available");break;case"devotees":case"statusActive":case"statusInactive":if(typeof s.downloadDevoteeListReport=="function")e=await s.downloadDevoteeListReport(r);else throw new Error("Devotee list report download functionality is not available");break;case"profile":if(typeof s.downloadDevoteeProfileReport=="function")e=await s.downloadDevoteeProfileReport(r);else throw new Error("Devotee profile download is not available yet");break;default:throw new Error("Unknown report type selected")}}catch(a){throw console.error("Download error details:",a),a}const o=H();u(`${o} Report downloaded successfully in ${ee(N.value)} format`,"success"),console.log("Download completed successfully:",e)}catch(r){console.error("Error downloading report:",r);const e=(r==null?void 0:r.message)||"Unknown error";u(`Failed to download report: ${e}`,"error")}},ae=async()=>{var r;try{if(!_){console.error("Temple store is not available");return}typeof _.clearTempleData=="function"?_.clearTempleData():_.temples=[];const e=m.value&&c.value.length>0?c.value:[b.value];if(!e||e.length===0||e.every(v=>!v))throw new Error("No valid tenant IDs available");const o=await Re(()=>import("./index-Bqden_Qr.js").then(v=>v.Z),__vite__mapDeps([0,1])).then(v=>v.default);let a=[];for(const v of e)if(v)try{const x=await o.get("/v1/entities",{params:{tenant_id:v,created_by:v,_cache_bust:Date.now()},headers:{"X-Tenant-ID":v}});let D=[];x.data&&Array.isArray(x.data)?D=x.data:x.data&&Array.isArray(x.data.data)&&(D=x.data.data);const oe=D.filter(w=>{const P=String(w.created_by||""),he=String(w.tenant_id||"");return P===String(v)||he===String(v)}).map(w=>({id:w.id,name:w.name||w.temple_name||w.templeName||"Unknown Temple",status:w.status||"active",created_by:w.created_by,tenant_id:w.tenant_id,sourceTenantId:v}));a.push(...oe)}catch(x){console.warn(`Failed to fetch entities for tenant ${v}:`,x);try{const D=await o.get("/v1/temples",{params:{entity_id:v,_cache_bust:Date.now()},headers:{"X-Tenant-ID":v}}),w=(Array.isArray(D.data)?D.data:Array.isArray((r=D.data)==null?void 0:r.data)?D.data.data:[]).map(P=>({id:P.id,name:P.name||P.temple_name||P.templeName||"Unknown Temple",status:P.status||"active",created_by:P.created_by||v,tenant_id:P.tenant_id||v,sourceTenantId:v}));a.push(...w)}catch(D){console.error(`Failed to fetch temples for tenant ${v}:`,D)}}const f=[],h=new Set;for(const v of a){const x=String(v.id);h.has(x)||(h.add(x),f.push(v))}_.temples=f,f.length===0&&u("No temples found for the selected tenant(s)","warning")}catch(e){console.error("Error loading temples:",e),_.temples=[],u("Failed to load temple data","error")}},be=()=>{if(!s)return u("Reports store is not available. Please refresh the page.","error"),!1;const e=["getDevoteeBirthdaysPreview","downloadDevoteeBirthdaysReport","getDevoteeListPreview","downloadDevoteeListReport","clearError","clearReportData"].filter(o=>typeof s[o]!="function");return e.length>0&&console.warn(`Reports functionality incomplete. Missing: ${e.join(", ")}`),!0};return j(d,()=>{s&&typeof s.clearReportData=="function"&&s.clearReportData(),(d.value==="statusActive"||d.value==="statusInactive")&&(E.value="all"),O()}),j([k,E],()=>{O()}),j(S,()=>{}),j(c,async(r,e)=>{r&&r.length>0&&JSON.stringify(r)!==JSON.stringify(e)&&(await ae(),k.value="all",O())},{deep:!0}),Te(async()=>{if(!s||!_||!p){u("Initialization error. Please refresh the page.","error");return}if(be()){typeof s.clearReportData=="function"&&s.clearReportData();try{await ae(),m.value&&c.value&&c.value.length>0||!m.value&&b.value?await O():u("Tenant information is missing. Please refresh the page or go back and select tenants.","warning")}catch(e){console.error("Error in component initialization:",e),u("Failed to initialize reports page. Please refresh and try again.","error")}}}),(r,e)=>{const o=Ae("router-link");return i(),n("div",Ee,[m.value?(i(),n("div",Ce,[Se(o,{to:"/superadmin/reports",class:"inline-flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"},{default:Ie(()=>[...e[10]||(e[10]=[t("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),F(" Back to SuperAdmin Reports ",-1)])]),_:1})])):T("",!0),t("div",Be,[t("div",Fe,[t("div",Ue,[t("div",null,[e[12]||(e[12]=t("h1",{class:"text-2xl font-bold text-gray-900"},"Devotee Reports",-1)),t("p",Le,[e[11]||(e[11]=F(" Download devotee data for your temples ",-1)),m.value&&c.value.length>1?(i(),n("span",Me," (Multiple Tenants Selected: "+l(c.value.length)+") ",1)):m.value&&c.value.length===1?(i(),n("span",Ne," (Tenant ID: "+l(c.value[0])+") ",1)):b.value?(i(),n("span",Oe," (Tenant ID: "+l(b.value)+") ",1)):T("",!0)])]),t("div",qe,[t("div",Ve,[t("span",$e,l(le.value),1),t("span",je,l(W.value?"(Super Admin)":"(Tenant)"),1)])])])])]),t("div",ze,[X.value?(i(),n("div",Ye,[t("div",He,[e[14]||(e[14]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),t("div",Je,[e[13]||(e[13]=t("h3",{class:"text-sm font-medium text-red-800"},"Error",-1)),t("div",Ge,l(X.value),1),t("div",{class:"mt-4"},[t("button",{onClick:K,class:"text-sm bg-red-100 text-red-800 px-3 py-1 rounded hover:bg-red-200"}," Dismiss ")])])])])):T("",!0),t("div",We,[t("div",Xe,[e[15]||(e[15]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Select Report Type",-1)),t("div",Ze,[t("button",{onClick:e[0]||(e[0]=a=>d.value="birthdays"),class:U(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",d.value==="birthdays"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Devotee Birthdays ",2),t("button",{onClick:e[1]||(e[1]=a=>d.value="devotees"),class:U(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",d.value==="devotees"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Devotee List ",2),t("button",{onClick:e[2]||(e[2]=a=>d.value="statusActive"),class:U(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",d.value==="statusActive"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Active Devotees ",2),t("button",{onClick:e[3]||(e[3]=a=>d.value="statusInactive"),class:U(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",d.value==="statusInactive"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Inactive Devotees ",2),t("button",{onClick:e[4]||(e[4]=a=>d.value="profile"),class:U(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",d.value==="profile"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Devotee Profile ",2)])])]),t("div",Ke,[t("div",Qe,[t("h3",et,l(H()),1),t("p",tt," Configure filters and download "+l(ve()),1)]),t("div",rt,[t("div",at,[e[18]||(e[18]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Select Temple",-1)),t("div",ot,[V(t("select",{"onUpdate:modelValue":e[5]||(e[5]=a=>k.value=a),disabled:C.value,onChange:ce,class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed"},[e[16]||(e[16]=t("option",{value:"all"},"All Temples",-1)),(i(!0),n(L,null,M(R.value,a=>(i(),n("option",{key:a.id,value:a.id},l(a.name)+" ("+l(a.sourceTenantId||a.tenant_id||"Unknown Tenant")+") ",9,nt))),128))],40,st),[[J,k.value]]),e[17]||(e[17]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},null,-1))]),R.value.length===0?(i(),n("div",lt," No temples found for selected tenant(s). Please check your tenant selection. ")):T("",!0)]),d.value==="birthdays"?(i(),n("div",it,[t("div",dt,[t("div",null,[e[19]||(e[19]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Birthday Period",-1)),t("div",ut,[(i(),n(L,null,M(z,a=>t("button",{key:a.value,onClick:f=>Q(a.value),disabled:C.value,class:U(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",S.value===a.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},l(a.label),11,ct)),64))])])])])):["devotees","statusActive","statusInactive"].includes(d.value)?(i(),n("div",vt,[t("div",gt,[t("div",null,[e[20]||(e[20]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Join Date Period",-1)),t("div",pt,[(i(),n(L,null,M(z,a=>t("button",{key:a.value,onClick:f=>Q(a.value),disabled:C.value,class:U(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",S.value===a.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},l(a.label),11,mt)),64))])]),d.value==="devotees"?(i(),n("div",yt,[e[23]||(e[23]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Devotee Status",-1)),t("div",ft,[V(t("select",{"onUpdate:modelValue":e[6]||(e[6]=a=>E.value=a),disabled:C.value,class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed"},[...e[21]||(e[21]=[t("option",{value:"all"},"All Statuses",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"inactive"},"Inactive",-1),t("option",{value:"new"},"New Members",-1)])],8,bt),[[J,E.value]]),e[22]||(e[22]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},null,-1))])])):d.value==="statusActive"||d.value==="statusInactive"?(i(),n("div",ht,[e[24]||(e[24]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Status Filter",-1)),t("div",wt,[t("span",xt,l(d.value==="statusActive"?"Active Devotees Only":"Inactive Devotees Only"),1)])])):T("",!0)])])):d.value==="profile"?(i(),n("div",_t,[...e[25]||(e[25]=[t("p",{class:"text-gray-600 mb-6"},"This report includes detailed profile information for devotees.",-1)])])):T("",!0),S.value==="custom"?(i(),n("div",kt,[t("div",Dt,[t("div",null,[e[26]||(e[26]=t("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"Start Date",-1)),V(t("input",{type:"date","onUpdate:modelValue":e[7]||(e[7]=a=>I.value=a),disabled:C.value,class:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,Tt),[[se,I.value]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"End Date",-1)),V(t("input",{type:"date","onUpdate:modelValue":e[8]||(e[8]=a=>A.value=a),disabled:C.value,class:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,St),[[se,A.value]])])])])):T("",!0),t("div",It,[t("div",At,[e[31]||(e[31]=t("div",{class:"mb-4 md:mb-0"},[t("h4",{class:"text-lg font-medium text-gray-900"},"Download Report"),t("p",{class:"text-sm text-gray-600"},"Select a format and click download")],-1)),t("div",Rt,[t("div",Pt,[V(t("select",{"onUpdate:modelValue":e[9]||(e[9]=a=>N.value=a),disabled:C.value,class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed"},[(i(),n(L,null,M(G,a=>t("option",{key:a.value,value:a.value},l(a.label),9,Ct)),64))],8,Et),[[J,N.value]]),e[28]||(e[28]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},null,-1))]),t("button",{onClick:fe,disabled:C.value||R.value.length===0,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[Y.value?(i(),n("svg",Ft,[...e[29]||(e[29]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(i(),n("svg",Ut,[...e[30]||(e[30]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])])),F(" "+l(Y.value?"Downloading...":"Download"),1)],8,Bt)])])])])]),t("div",Lt,[t("div",Mt,[e[36]||(e[36]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Applied Filters",-1)),t("div",Nt,[t("div",Ot,[e[32]||(e[32]=t("span",{class:"font-medium mr-1"},"Report Type:",-1)),F(" "+l(H()),1)]),t("div",qt,[t("span",Vt,l(m.value?"Tenant(s):":"Tenant:"),1),m.value&&c.value.length>1?(i(),n("span",$t,l(c.value.length)+" selected ("+l(c.value.join(", "))+") ",1)):m.value&&c.value.length===1?(i(),n("span",jt,l(c.value[0]),1)):(i(),n("span",zt,l(b.value),1))]),t("div",Yt,[e[33]||(e[33]=t("span",{class:"font-medium mr-1"},"Temple:",-1)),F(" "+l(k.value==="all"?"All Temples":pe(k.value)),1)]),t("div",Ht,[t("span",Jt,l(["birthdays","profile"].includes(d.value)?"Birthday":"Join Date")+" Period:",1),F(" "+l(me(S.value))+" ",1),S.value==="custom"?(i(),n("span",Gt," ("+l(te(I.value))+" - "+l(te(A.value))+") ",1)):T("",!0)]),t("div",Wt,[e[34]||(e[34]=t("span",{class:"font-medium mr-1"},"Status:",-1)),F(" "+l(ge()),1)]),t("div",Xt,[e[35]||(e[35]=t("span",{class:"font-medium mr-1"},"Format:",-1)),F(" "+l(ee(N.value)),1)])]),e[37]||(e[37]=t("p",{class:"mt-4 text-sm text-gray-600"}," Your report will include data based on the filters above. Click Download to generate and download the report. ",-1))])]),ue.value?(i(),n("div",Zt,[t("div",Kt,[e[38]||(e[38]=t("h3",{class:"text-lg font-medium text-gray-900"},"Report Preview",-1)),t("p",Qt," Showing "+l(q.value.totalRecords||$.value.length)+" records ",1)]),t("div",er,[t("table",tr,[t("thead",rr,[t("tr",null,[(i(!0),n(L,null,M(Z.value,a=>(i(),n("th",{key:a.key,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},l(a.label),1))),128))])]),t("tbody",ar,[(i(!0),n(L,null,M($.value.slice(0,10),(a,f)=>(i(),n("tr",{key:f},[(i(!0),n(L,null,M(Z.value,h=>(i(),n("td",{key:h.key,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},l((a==null?void 0:a[h.key])||"-"),1))),128))]))),128))])])]),$.value.length>10?(i(),n("div",or," Showing first 10 records. Download the full report to see all "+l(q.value.totalRecords||$.value.length)+" records. ",1)):T("",!0)])):T("",!0)])])}}};export{lr as default};
