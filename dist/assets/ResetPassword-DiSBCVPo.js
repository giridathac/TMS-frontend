import{r,h as a,i as e,j as x,w as h,v as w,Q as _,t as c,G as b,A as k,o as l}from"./index-Bqden_Qr.js";import{s as N}from"./superadmin.service-ymcF6AST.js";const E={class:"container mx-auto px-4 py-8"},R={class:"bg-white rounded-lg shadow-md p-6 mb-8"},S={class:"flex flex-col md:flex-row md:space-x-4 space-y-4 md:space-y-0"},U={class:"flex-1"},P=["disabled"],A={key:0},B={key:1},C={key:0,class:"bg-white rounded-lg shadow-md p-6 mb-8"},T={key:0,class:"flex justify-center py-8"},j={key:1,class:"overflow-x-auto"},F={class:"min-w-full divide-y divide-gray-200"},I={class:"bg-white divide-y divide-gray-200"},M={class:"px-6 py-4 whitespace-nowrap"},V={class:"text-sm font-medium text-gray-900"},D={class:"px-6 py-4 whitespace-nowrap"},L={class:"text-sm text-gray-500"},O={class:"px-6 py-4 whitespace-nowrap"},K={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"},z={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},G={key:2,class:"text-center py-8"},Q={key:1,class:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-md shadow-lg z-50 flex items-center"},J={__name:"ResetPassword",setup($){const f=k(),u=r(""),p=r(!1),n=r(!1),i=r(!1),o=r(null),g=r(!1),m=async()=>{if(u.value){p.value=!0,n.value=!0,i.value=!1;try{const s=await N.searchUserByEmail(u.value);console.log("Search response:",s),s.success&&s.data&&Object.keys(s.data).length>0?(i.value=!0,o.value=s.data,console.log("Found user:",o.value)):(i.value=!1,o.value=null)}catch(s){console.error("Error searching for user:",s),i.value=!1,o.value=null}finally{n.value=!1}}},v=s=>{var t,d;return(t=s.role)!=null&&t.role_name?s.role.role_name:(d=s.role)!=null&&d.roleName?s.role.roleName:s.roleName?s.roleName:typeof s.role=="string"?s.role:"User"},y=s=>{const t=s.id||s.ID||s.user_id;f.push({name:"ResetPasswordForm",params:{userId:t}})};return(s,t)=>(l(),a("div",E,[t[8]||(t[8]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-6"},"Reset User Password",-1)),e("div",R,[t[2]||(t[2]=e("h2",{class:"text-lg font-medium text-gray-700 mb-4"},"Search User by Email",-1)),e("div",S,[e("div",U,[h(e("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=d=>u.value=d),placeholder:"Enter user email address",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",onKeyup:_(m,["enter"])},null,544),[[w,u.value]])]),e("button",{onClick:m,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",disabled:n.value},[n.value?(l(),a("span",A,"Searching...")):(l(),a("span",B,"Search"))],8,P)])]),p.value?(l(),a("div",C,[t[6]||(t[6]=e("h2",{class:"text-lg font-medium text-gray-700 mb-4"},"Search Results",-1)),n.value?(l(),a("div",T,[...t[3]||(t[3]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-700"},null,-1)])])):i.value?(l(),a("div",j,[e("table",F,[t[4]||(t[4]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"NAME"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"EMAIL"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ROLE"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ACTION")])],-1)),e("tbody",I,[e("tr",null,[e("td",M,[e("div",V,c(o.value.full_name||o.value.fullName),1)]),e("td",D,[e("div",L,c(o.value.email),1)]),e("td",O,[e("span",K,c(v(o.value)),1)]),e("td",z,[e("button",{onClick:t[1]||(t[1]=d=>y(o.value)),class:"text-indigo-600 hover:text-indigo-900 bg-indigo-50 px-3 py-1 rounded-md"}," Reset Password ")])])])])])):(l(),a("div",G,[...t[5]||(t[5]=[e("div",{class:"text-gray-500"},"No user found with that email address.",-1)])]))])):x("",!0),g.value?(l(),a("div",Q,[...t[7]||(t[7]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),b(" Password updated successfully! ",-1)])])):x("",!0)]))}};export{J as default};
