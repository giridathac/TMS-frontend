import{_ as ce,e as me,c as D,r as y,s as pe,h as r,i as e,j as d,G as c,F as E,l as j,n as x,t as n,p as z,I as ve,w as _,v as C,z as G,M as ge,k as xe,N as fe,H as be,o as i}from"./index-Bqden_Qr.js";import{u as he}from"./superadmin-BBES2Ju7.js";import"./superadmin.service-ymcF6AST.js";const ye={class:"bg-white rounded-xl shadow-sm border border-gray-200"},we={class:"p-6"},ke={class:"overflow-x-auto"},_e={class:"min-w-full divide-y divide-gray-200"},Ce={class:"bg-white divide-y divide-gray-200"},Ue={key:0,class:"animate-pulse"},Ne={key:1},De={class:"px-6 py-4 whitespace-nowrap"},Se={class:"text-sm font-medium text-gray-900"},Pe={class:"px-6 py-4 whitespace-nowrap"},Ve={class:"text-sm text-gray-500"},Me={class:"px-6 py-4 whitespace-nowrap"},Be={class:"text-sm text-gray-500"},Ee={class:"px-6 py-4 whitespace-nowrap"},je={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-indigo-100 text-indigo-800"},Ae={class:"px-6 py-4 whitespace-nowrap"},Fe={class:"relative inline-block w-10 mr-2 align-middle select-none"},$e=["id","checked","onChange"],qe=["for"],ze={class:"text-xs ml-1"},Re={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Te=["onClick"],Le={key:0,class:"fixed inset-0 z-50 overflow-auto bg-black bg-opacity-50 flex items-center justify-center"},Oe={class:"bg-white rounded-lg shadow-xl max-w-5xl w-full mx-4 max-h-[90vh] overflow-y-auto"},He={class:"px-6 py-4"},Ie={class:"flex items-start"},Je={class:"flex-shrink-0"},Ge={key:0,class:"h-5 w-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},We={key:1,class:"h-5 w-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20"},Ke={class:"ml-3 w-full"},Qe={key:0},Xe={key:0},Ye={key:1},Ze={key:2,class:"mt-2 list-disc list-inside"},et={key:1,class:"space-y-6"},tt={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},st={class:"flex items-start"},lt={class:"mt-2 text-sm text-blue-700"},at={class:"list-disc list-inside mt-1 space-y-1"},ot={class:"mt-6"},rt={key:0,class:"mt-2 text-sm text-red-600"},it={key:2,class:"space-y-6"},nt={class:"flex items-center justify-between"},dt={class:"text-sm text-gray-600"},ut={class:"overflow-x-auto border border-gray-200 rounded-lg"},ct={class:"min-w-full divide-y divide-gray-200"},mt={class:"bg-white divide-y divide-gray-200"},pt={class:"px-4 py-3 text-sm text-gray-900"},vt={class:"px-4 py-3 text-sm text-gray-500"},gt={class:"px-4 py-3 text-sm text-gray-500"},xt={class:"px-4 py-3 text-sm text-gray-500"},ft={class:"px-4 py-3 text-sm"},bt={class:"px-4 py-3 text-sm"},ht={key:0,class:"text-sm text-gray-500 text-center"},yt={class:"flex justify-end space-x-3 pt-4 border-t border-gray-200"},wt=["disabled"],kt={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_t={key:1,class:"fixed inset-0 z-50 overflow-auto bg-black bg-opacity-50 flex items-center justify-center"},Ct={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Ut={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},Nt={class:"text-lg font-medium text-gray-900"},Dt={class:"px-6 py-4"},St={key:0,class:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4"},Pt={class:"flex items-center"},Vt={class:"ml-3"},Mt={class:"text-sm font-medium text-green-800"},Bt={class:"mt-1 text-sm text-green-700"},Et={key:0,class:"mt-1 text-sm text-red-600"},jt={key:0,class:"mt-1 text-sm text-red-600"},At={key:0},Ft={key:0,class:"mt-1 text-sm text-red-600"},$t={key:0,class:"mt-1 text-sm text-red-600"},qt=["disabled"],zt={value:"",disabled:""},Rt=["value"],Tt={key:0,class:"mt-2 text-sm text-amber-600"},Lt={key:1,class:"mt-2 text-sm text-red-600"},Ot={key:1,class:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200"},Ht={key:0,class:"mt-1 text-sm text-red-600"},It={key:0,class:"mt-1 text-sm text-red-600"},Jt={key:0,class:"mt-1 text-sm text-red-600"},Gt={key:0,class:"mt-1 text-sm text-red-600"},Wt={key:0,class:"mt-1 text-sm text-red-600"},Kt={key:2,class:"flex items-center space-x-2"},Qt={class:"relative inline-block w-10 mr-2 align-middle select-none"},Xt={class:"text-sm text-gray-500"},Yt={class:"flex justify-end space-x-3 pt-3"},Zt=["disabled"],es={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ts={__name:"UserManagement",setup(ss){const{success:A,error:N}=me(),w=he(),R=D(()=>w.loadingUserAction),F=D(()=>w.loadingUserRoles),W=D(()=>w.loadingUsers),S=y(!1),P=y(!1),v=y(!1),$=y(null),q=y(!1),f=y([]),b=y(""),T=y(!1),V=y(!1),m=y(null),M=D(()=>w.userRoles),L=D(()=>w.users),O=D(()=>M.value.map(s=>s.role_name)),l=y({fullName:"",email:"",password:"",phone:"",role:"",isActive:!0,templeDetails:{name:"",place:"",address:"",phoneNumber:"",description:""}}),o=y({}),K=()=>{console.log("Opening create modal"),P.value=!0},Q=()=>{console.log("Opening bulk upload modal"),q.value=!0,m.value=null},X=()=>{q.value=!1,B(),m.value=null};pe(async()=>{await w.refreshUserData()});const Y=s=>{if(typeof s=="object"&&s.description)return s.description;if(typeof s=="object"&&s.role_name)return s.role_name;const t=M.value.find(u=>u.role_name===s);return t?t.description||t.role_name:s},Z=s=>O.value.includes(s),ee=s=>["active","inactive"].includes(s==null?void 0:s.toLowerCase()),te=()=>{const t=[["Full Name","Email","Phone","Password","Role","Status"],["John Doe","john.doe@example.com","+1234567890","password123","user","active"],["Jane Smith","jane.smith@example.com","+1234567891","password456","admin","active"],["Mike Johnson","mike.johnson@example.com","+1234567892","password789","templeadmin","inactive"]].map(k=>k.map(g=>`"${g}"`).join(",")).join(`
`),u=new Blob([t],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a"),U=URL.createObjectURL(u);p.setAttribute("href",U),p.setAttribute("download","bulk_users_template.csv"),p.style.visibility="hidden",document.body.appendChild(p),p.click(),document.body.removeChild(p)},se=s=>{const t=s.target.files[0];t&&H(t)},le=s=>{T.value=!1;const t=s.dataTransfer.files;t.length>0&&H(t[0])},H=s=>{if(b.value="",!s.name.toLowerCase().endsWith(".csv")){b.value="Please upload a CSV file (.csv extension required)";return}if(s.size>5*1024*1024){b.value="File size must be less than 5MB";return}const t=new FileReader;t.onload=u=>{try{const p=u.target.result;ae(p)}catch(p){console.error("Error reading file:",p),b.value="Error reading the file. Please try again."}},t.onerror=()=>{b.value="Error reading the file. Please try again."},t.readAsText(s)},ae=s=>{try{const t=s.split(`
`).filter(g=>g.trim());if(t.length<2){b.value="CSV file must contain at least a header row and one data row";return}const u=t[0].split(",").map(g=>g.replace(/"/g,"").trim()),p=["Full Name","Email","Phone","Password","Role","Status"];if(p.some(g=>!u.includes(g))){b.value=`CSV headers must match exactly: ${p.join(", ")}`;return}const k=[];for(let g=1;g<t.length;g++){const a=t[g].split(",").map(ue=>ue.replace(/"/g,"").trim());if(a.length!==u.length){b.value=`Row ${g+1} has ${a.length} columns but expected ${u.length}`;return}const h={full_name:a[u.indexOf("Full Name")],email:a[u.indexOf("Email")],phone:a[u.indexOf("Phone")],password:a[u.indexOf("Password")],role:a[u.indexOf("Role")],status:a[u.indexOf("Status")]};if(!h.full_name||!h.email||!h.phone||!h.password||!h.role){b.value=`Row ${g+1} is missing required fields`;return}k.push(h)}f.value=k,console.log("Parsed CSV data:",k)}catch(t){console.error("Error parsing CSV:",t),b.value="Error parsing CSV file. Please check the format and try again."}},B=()=>{f.value=[],b.value="",window.document.querySelector('input[type="file"]')&&(window.document.querySelector('input[type="file"]').value="")},oe=async()=>{if(!f.value.length){N("No CSV data to upload");return}V.value=!0,m.value=null;try{console.log("Uploading bulk users:",f.value);const s=await w.createBulkUsers(f.value);s.success?(m.value={success:!0,message:"Bulk upload completed successfully",data:s.data},A(`Successfully uploaded ${s.data.success_count} out of ${s.data.total_rows} users`),await w.refreshUserData(),setTimeout(()=>{B()},3e3)):(m.value={success:!1,message:s.error||"Bulk upload failed",data:s.data},N(s.error||"Failed to upload users"))}catch(s){console.error("Error uploading bulk users:",s),m.value={success:!1,message:"An error occurred during bulk upload",data:null},N("Failed to upload users. Please try again.")}finally{V.value=!1}};D(()=>!l.value.fullName||!l.value.email||!v.value&&!l.value.password||!l.value.phone||!l.value.role||l.value.role==="templeadmin"&&(!l.value.templeDetails.name||!l.value.templeDetails.place||!l.value.templeDetails.address||!l.value.templeDetails.phoneNumber||!l.value.templeDetails.description)?!1:Object.keys(o.value).length===0);const re=()=>{var s;return o.value={},l.value.fullName.trim()?l.value.fullName.trim().length<2&&(o.value.fullName="Full name must be at least 2 characters"):o.value.fullName="Full name is required",l.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.value.email)||(o.value.email="Please enter a valid email address"):o.value.email="Email is required",v.value||(l.value.password?l.value.password.length<6&&(o.value.password="Password must be at least 6 characters"):o.value.password="Password is required"),l.value.phone?/^[\+]?[1-9][\d]{0,15}$/.test(l.value.phone.replace(/\s/g,""))||(o.value.phone="Please enter a valid phone number"):o.value.phone="Phone number is required",l.value.role||(o.value.role="Please select a user role"),l.value.role==="templeadmin"&&(l.value.templeDetails.name||(o.value.templeName="Temple name is required"),l.value.templeDetails.place||(o.value.templePlace="Temple location is required"),l.value.templeDetails.address||(o.value.templeAddress="Temple address is required"),l.value.templeDetails.phoneNumber||(o.value.templePhoneNumber="Temple phone number is required"),(s=l.value.templeDetails.description)!=null&&s.trim()||(o.value.templeDescription="Temple description is required")),Object.keys(o.value).length===0},ie=async()=>{if(re())try{const s={fullName:l.value.fullName,email:l.value.email,phone:l.value.phone,role:l.value.role};v.value||(s.password=l.value.password),l.value.role==="templeadmin"&&(s.templeName=l.value.templeDetails.name,s.templePlace=l.value.templeDetails.place,s.templeAddress=l.value.templeDetails.address,s.templePhoneNo=l.value.templeDetails.phoneNumber,s.templeDescription=l.value.templeDetails.description),console.log(`${v.value?"Updating":"Creating"} user with data:`,s);let t;v.value?t=await w.updateUser($.value,s):t=await w.createUser(s),t.success?(S.value=!0,A(t.message||`User ${v.value?"updated":"created"} successfully!`),setTimeout(()=>{J(),P.value=!1,S.value=!1},2e3)):N(t.error||`Failed to ${v.value?"update":"create"} user`)}catch(s){console.error(`Error ${v.value?"updating":"creating"} user:`,s),N(`Failed to ${v.value?"update":"create"} user. Please try again.`)}},ne=async s=>{try{const t=s.status==="active"?"inactive":"active",u=await w.updateUserStatus(s.id,t);u.success?A(u.message||`User status updated to ${t}`):N(u.error||"Failed to update user status")}catch(t){console.error("Error toggling user status:",t),N("Failed to update user status")}},de=s=>{var t,u,p,U,k;v.value=!0,$.value=s.id,l.value={fullName:s.full_name,email:s.email,phone:s.phone,role:s.role.role_name,isActive:s.status==="active",templeDetails:{name:((t=s.temple_details)==null?void 0:t.temple_name)||"",place:((u=s.temple_details)==null?void 0:u.temple_place)||"",address:((p=s.temple_details)==null?void 0:p.temple_address)||"",phoneNumber:((U=s.temple_details)==null?void 0:U.temple_phone_no)||"",description:((k=s.temple_details)==null?void 0:k.temple_description)||""}},console.log("Opening edit modal for user:",s.id),P.value=!0},I=()=>{console.log("Canceling form, closing modal"),P.value=!1,setTimeout(()=>{J(),v.value=!1,$.value=null,S.value=!1},300)},J=()=>{l.value={fullName:"",email:"",password:"",phone:"",role:"",isActive:!0,templeDetails:{name:"",place:"",address:"",phoneNumber:"",description:""}},o.value={}};return(s,t)=>{var p,U,k,g;const u=be("user-assign-button");return i(),r("div",ye,[e("div",{class:"p-6 border-b border-gray-200 flex justify-between items-center"},[t[15]||(t[15]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900 font-roboto"},"User Management"),e("p",{class:"text-sm text-gray-600 mt-1"},"Create and manage system users")],-1)),e("div",{class:"flex space-x-3"},[e("button",{onClick:Q,class:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"},[...t[13]||(t[13]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),c(" Bulk Upload User ",-1)])]),e("button",{onClick:K,class:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"},[...t[14]||(t[14]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),c(" Create User ",-1)])])])]),e("div",we,[e("div",ke,[e("table",_e,[t[18]||(t[18]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Full Name"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Phone"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Role"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Ce,[W.value?(i(),r("tr",Ue,[...t[16]||(t[16]=[e("td",{colspan:"6",class:"px-6 py-4"},[e("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)])])):L.value.length===0?(i(),r("tr",Ne,[...t[17]||(t[17]=[e("td",{colspan:"6",class:"px-6 py-4 text-center text-sm text-gray-500"}," No users found. Create your first user by clicking the 'Create User' button or upload users in bulk via CSV. ",-1)])])):d("",!0),(i(!0),r(E,null,j(L.value,a=>(i(),r("tr",{key:a.id,class:"hover:bg-gray-50"},[e("td",De,[e("div",Se,n(a.full_name),1)]),e("td",Pe,[e("div",Ve,n(a.email),1)]),e("td",Me,[e("div",Be,n(a.phone),1)]),e("td",Ee,[e("span",je,n(Y(a.role)),1)]),e("td",Ae,[e("div",Fe,[e("input",{type:"checkbox",id:`toggle-${a.id}`,checked:a.status==="active",onChange:h=>ne(a),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"},null,40,$e),e("label",{for:`toggle-${a.id}`,class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,8,qe)]),e("span",ze,n(a.status==="active"?"Active":"Inactive"),1)]),e("td",Re,[e("button",{onClick:h=>de(a),class:"text-indigo-600 hover:text-indigo-900 mr-3"}," Edit ",8,Te),G(u,{user:a},null,8,["user"])])]))),128))])])])]),q.value?(i(),r("div",Le,[e("div",Oe,[e("div",{class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},[t[20]||(t[20]=e("h3",{class:"text-lg font-medium text-gray-900"},"Bulk Upload Users via CSV",-1)),e("button",{onClick:X,class:"text-gray-400 hover:text-gray-500"},[...t[19]||(t[19]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",He,[m.value?(i(),r("div",{key:0,class:x(["mb-6 rounded-lg p-4",m.value.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"])},[e("div",Ie,[e("div",Je,[m.value.success?(i(),r("svg",Ge,[...t[21]||(t[21]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):(i(),r("svg",We,[...t[22]||(t[22]=[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)])]))]),e("div",Ke,[e("h3",{class:x(["text-sm font-medium",m.value.success?"text-green-800":"text-red-800"])},n(m.value.success?"Bulk Upload Completed!":"Bulk Upload Failed!"),3),e("div",{class:x(["mt-2 text-sm",m.value.success?"text-green-700":"text-red-700"])},[m.value.success?(i(),r("p",Qe,[c(" Successfully processed "+n(((p=m.value.data)==null?void 0:p.total_rows)||0)+" rows. "+n(((U=m.value.data)==null?void 0:U.success_count)||0)+" users created successfully. ",1),((k=m.value.data)==null?void 0:k.failed_count)>0?(i(),r("span",Xe,n(m.value.data.failed_count)+" failed. ",1)):d("",!0)])):(i(),r("p",Ye,n(m.value.message),1)),(g=m.value.data)!=null&&g.errors&&m.value.data.errors.length>0?(i(),r("ul",Ze,[(i(!0),r(E,null,j(m.value.data.errors,(a,h)=>(i(),r("li",{key:h,class:"text-xs"},n(a),1))),128))])):d("",!0)],2)])])],2)):d("",!0),f.value.length?d("",!0):(i(),r("div",et,[e("div",tt,[e("div",st,[t[31]||(t[31]=e("svg",{class:"h-5 w-5 text-blue-500 mt-0.5 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)),e("div",null,[t[30]||(t[30]=e("h4",{class:"text-sm font-medium text-blue-800"},"CSV Upload Instructions",-1)),e("div",lt,[t[29]||(t[29]=e("p",null,"Please ensure your CSV file contains the following columns in exact order:",-1)),e("ul",at,[t[24]||(t[24]=e("li",null,[e("strong",null,"Full Name"),c(" - User's complete name")],-1)),t[25]||(t[25]=e("li",null,[e("strong",null,"Email"),c(" - Valid email address")],-1)),t[26]||(t[26]=e("li",null,[e("strong",null,"Phone"),c(" - Phone number")],-1)),t[27]||(t[27]=e("li",null,[e("strong",null,"Password"),c(" - User password")],-1)),e("li",null,[t[23]||(t[23]=e("strong",null,"Role",-1)),c(" - User role ("+n(O.value.join(", "))+")",1)]),t[28]||(t[28]=e("li",null,[e("strong",null,"Status"),c(" - active or inactive")],-1))])])])])]),e("div",{class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},[t[33]||(t[33]=e("div",null,[e("h4",{class:"text-sm font-medium text-gray-800"},"Need a template?"),e("p",{class:"text-sm text-gray-600"},"Download a sample CSV file with the correct format.")],-1)),e("button",{onClick:te,class:"flex items-center px-3 py-2 bg-gray-600 text-white text-sm rounded-lg hover:bg-gray-700 transition-colors"},[...t[32]||(t[32]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),c(" Download Sample ",-1)])])]),e("div",ot,[e("div",{onClick:t[0]||(t[0]=a=>s.$refs.fileInput.click()),onDragover:t[1]||(t[1]=z(()=>{},["prevent"])),onDrop:z(le,["prevent"]),class:x(["relative border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 cursor-pointer transition-colors",{"border-green-400 bg-green-50":T.value}])},[e("input",{ref:"fileInput",type:"file",accept:".csv",onChange:se,class:"hidden"},null,544),t[34]||(t[34]=ve('<svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" data-v-c91b8e97><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-c91b8e97></path></svg><div class="mt-4" data-v-c91b8e97><p class="text-lg text-gray-600" data-v-c91b8e97>Drop your CSV file here or click to browse</p><p class="text-sm text-gray-500 mt-1" data-v-c91b8e97>Only .csv files are accepted</p></div>',2))],34),b.value?(i(),r("div",rt,n(b.value),1)):d("",!0)])])),f.value.length>0?(i(),r("div",it,[e("div",nt,[e("div",null,[t[35]||(t[35]=e("h4",{class:"text-lg font-medium text-gray-900"},"CSV Data Preview",-1)),e("p",dt,n(f.value.length)+" rows found. Review the data before uploading.",1)]),e("button",{onClick:B,class:"text-sm text-gray-500 hover:text-gray-700"}," Upload Different File ")]),e("div",ut,[e("table",ct,[t[36]||(t[36]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Full Name"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Phone"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Password"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Role"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status")])],-1)),e("tbody",mt,[(i(!0),r(E,null,j(f.value.slice(0,10),(a,h)=>(i(),r("tr",{key:h,class:"hover:bg-gray-50"},[e("td",pt,n(a.full_name),1),e("td",vt,n(a.email),1),e("td",gt,n(a.phone),1),e("td",xt,n(a.password?"****":"Missing"),1),e("td",ft,[e("span",{class:x(["px-2 py-1 text-xs rounded-full",Z(a.role)?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},n(a.role),3)]),e("td",bt,[e("span",{class:x(["px-2 py-1 text-xs rounded-full",ee(a.status)?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},n(a.status),3)])]))),128))])])]),f.value.length>10?(i(),r("p",ht," Showing first 10 rows. "+n(f.value.length-10)+" more rows will be processed. ",1)):d("",!0),e("div",yt,[e("button",{onClick:B,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors"}," Cancel "),e("button",{onClick:oe,disabled:V.value||!f.value.length,class:"flex items-center px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[V.value?(i(),r("svg",kt,[...t[37]||(t[37]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):d("",!0),c(" "+n(V.value?"Uploading...":`Upload ${f.value.length} Users`),1)],8,wt)])])):d("",!0)])])])):d("",!0),P.value?(i(),r("div",_t,[e("div",Ct,[e("div",Ut,[e("h3",Nt,n(v.value?"Edit User":"Create New User"),1),e("button",{onClick:I,class:"text-gray-400 hover:text-gray-500"},[...t[38]||(t[38]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Dt,[S.value?(i(),r("div",St,[e("div",Pt,[t[39]||(t[39]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-green-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",Vt,[e("h3",Mt,"User "+n(v.value?"Updated":"Created")+" Successfully!",1),e("div",Bt,[e("p",null," User account has been "+n(v.value?"updated":"created")+" successfully. ",1)])])])])):d("",!0),S.value?d("",!0):(i(),r("form",{key:1,onSubmit:z(ie,["prevent"]),class:"space-y-6"},[e("div",null,[t[40]||(t[40]=e("label",{for:"fullName",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Full Name "),e("span",{class:"text-red-500"},"*")],-1)),_(e("input",{id:"fullName","onUpdate:modelValue":t[2]||(t[2]=a=>l.value.fullName=a),type:"text",placeholder:"Enter full name",required:"",autocomplete:"name",class:x(["block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5",{"border-red-500":o.value.fullName}])},null,2),[[C,l.value.fullName]]),o.value.fullName?(i(),r("div",Et,n(o.value.fullName),1)):d("",!0)]),e("div",null,[t[41]||(t[41]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Email Address "),e("span",{class:"text-red-500"},"*")],-1)),_(e("input",{id:"email","onUpdate:modelValue":t[3]||(t[3]=a=>l.value.email=a),type:"email",placeholder:"Enter email",required:"",autocomplete:"email",class:x(["block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5",{"border-red-500":o.value.email}])},null,2),[[C,l.value.email]]),o.value.email?(i(),r("div",jt,n(o.value.email),1)):d("",!0)]),v.value?d("",!0):(i(),r("div",At,[t[42]||(t[42]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Password "),e("span",{class:"text-red-500"},"*")],-1)),_(e("input",{id:"password","onUpdate:modelValue":t[4]||(t[4]=a=>l.value.password=a),type:"password",placeholder:"Create a strong password",required:"",autocomplete:"new-password",class:x(["block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5",{"border-red-500":o.value.password}])},null,2),[[C,l.value.password]]),o.value.password?(i(),r("div",Ft,n(o.value.password),1)):d("",!0),G(ge,{password:l.value.password,class:"mt-2"},null,8,["password"])])),e("div",null,[t[43]||(t[43]=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Phone Number "),e("span",{class:"text-red-500"},"*")],-1)),_(e("input",{id:"phone","onUpdate:modelValue":t[5]||(t[5]=a=>l.value.phone=a),type:"tel",placeholder:"Enter phone number",required:"",autocomplete:"tel",class:x(["block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5",{"border-red-500":o.value.phone}])},null,2),[[C,l.value.phone]]),o.value.phone?(i(),r("div",$t,n(o.value.phone),1)):d("",!0)]),e("div",null,[t[44]||(t[44]=e("label",{for:"role",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" User Role "),e("span",{class:"text-red-500"},"*")],-1)),_(e("select",{id:"role","onUpdate:modelValue":t[6]||(t[6]=a=>l.value.role=a),class:"block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5",required:"",disabled:F.value},[e("option",zt,n(F.value?"Loading roles...":"Select a role"),1),(i(!0),r(E,null,j(M.value,a=>(i(),r("option",{key:a.id,value:a.role_name},n(a.role_name),9,Rt))),128))],8,qt),[[xe,l.value.role]]),M.value.length===0&&!F.value?(i(),r("div",Tt," No roles available. Please check role configuration. ")):d("",!0),o.value.role?(i(),r("div",Lt,n(o.value.role),1)):d("",!0)]),l.value.role==="templeadmin"?(i(),r("div",Ot,[t[50]||(t[50]=e("h4",{class:"font-medium text-gray-900"},"Temple Details",-1)),e("div",null,[t[45]||(t[45]=e("label",{for:"templeName",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Temple Name "),e("span",{class:"text-red-500"},"*")],-1)),_(e("input",{id:"templeName","onUpdate:modelValue":t[7]||(t[7]=a=>l.value.templeDetails.name=a),type:"text",placeholder:"Enter temple name",required:"",class:x(["block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5",{"border-red-500":o.value.templeName}])},null,2),[[C,l.value.templeDetails.name]]),o.value.templeName?(i(),r("div",Ht,n(o.value.templeName),1)):d("",!0)]),e("div",null,[t[46]||(t[46]=e("label",{for:"templePlace",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Temple Location "),e("span",{class:"text-red-500"},"*")],-1)),_(e("input",{id:"templePlace","onUpdate:modelValue":t[8]||(t[8]=a=>l.value.templeDetails.place=a),type:"text",placeholder:"Enter city, state",required:"",class:x(["block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5",{"border-red-500":o.value.templePlace}])},null,2),[[C,l.value.templeDetails.place]]),o.value.templePlace?(i(),r("div",It,n(o.value.templePlace),1)):d("",!0)]),e("div",null,[t[47]||(t[47]=e("label",{for:"templeAddress",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Temple Address "),e("span",{class:"text-red-500"},"*")],-1)),_(e("input",{id:"templeAddress","onUpdate:modelValue":t[9]||(t[9]=a=>l.value.templeDetails.address=a),type:"text",placeholder:"Enter complete address",required:"",class:x(["block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5",{"border-red-500":o.value.templeAddress}])},null,2),[[C,l.value.templeDetails.address]]),o.value.templeAddress?(i(),r("div",Jt,n(o.value.templeAddress),1)):d("",!0)]),e("div",null,[t[48]||(t[48]=e("label",{for:"templePhoneNumber",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Temple Phone "),e("span",{class:"text-red-500"},"*")],-1)),_(e("input",{id:"templePhoneNumber","onUpdate:modelValue":t[10]||(t[10]=a=>l.value.templeDetails.phoneNumber=a),type:"tel",placeholder:"Enter temple contact number",required:"",class:x(["block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5",{"border-red-500":o.value.templePhoneNumber}])},null,2),[[C,l.value.templeDetails.phoneNumber]]),o.value.templePhoneNumber?(i(),r("div",Gt,n(o.value.templePhoneNumber),1)):d("",!0)]),e("div",null,[t[49]||(t[49]=e("label",{for:"templeDescription",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Temple Description "),e("span",{class:"text-red-500"},"*")],-1)),_(e("textarea",{id:"templeDescription","onUpdate:modelValue":t[11]||(t[11]=a=>l.value.templeDetails.description=a),rows:"3",class:"block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition-colors duration-200 p-3 leading-relaxed",placeholder:"Brief description about the temple",required:""},null,512),[[C,l.value.templeDetails.description]]),o.value.templeDescription?(i(),r("div",Wt,n(o.value.templeDescription),1)):d("",!0)])])):d("",!0),v.value?(i(),r("div",Kt,[t[52]||(t[52]=e("label",{for:"status",class:"text-sm font-medium text-gray-700"},"User Status:",-1)),e("div",Qt,[_(e("input",{type:"checkbox",id:"status","onUpdate:modelValue":t[12]||(t[12]=a=>l.value.isActive=a),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"},null,512),[[fe,l.value.isActive]]),t[51]||(t[51]=e("label",{for:"status",class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1))]),e("span",Xt,n(l.value.isActive?"Active":"Inactive"),1)])):d("",!0),e("div",Yt,[e("button",{type:"button",class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",onClick:I}," Cancel "),e("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center",disabled:R.value},[R.value?(i(),r("svg",es,[...t[53]||(t[53]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):d("",!0),c(" "+n(v.value?"Update User":"Create User"),1)],8,Zt)])],32))])])])):d("",!0)])}}},rs=ce(ts,[["__scopeId","data-v-c91b8e97"]]);export{rs as default};
